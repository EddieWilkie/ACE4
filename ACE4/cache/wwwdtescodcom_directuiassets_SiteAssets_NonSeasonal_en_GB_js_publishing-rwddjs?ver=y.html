 /* Publishing JS version 1.0.1 *//* Start - PreAnalytics Call */  function preAnalyticsCall() {     try {      if (window.isKiosk()) {        if (/kiosk.direct.ukroi.tesco.org/gi.test(window.location.href)) {          s.account="tescoukinstoreprod,tescoukmasterprod";          s.dynamicAccountList="tescoukinstoreprod,tescoukmasterprod";          s.un="tescoukinstoreprod,tescoukmasterprod";          s.oun="tescoukinstoreprod,tescoukmasterprod";          s.fun="tescoukinstoreprod,tescoukmasterprod";        }    /* Start GFO-1069 */             require(['modules/common'], function (common) {                 if (typeof common.getKioskStoreId === 'function') {                     var sKioskStoreId = common.getKioskStoreId();                     if (sKioskStoreId !== '') {                         s.eVar46 = sKioskStoreId;                     }                 }             });    /* End GFO-1069 */      } else {        if (/tesco.com/gi.test(window.location.href)) {            s.dynamicAccountList = "tescoukdirectprod,tescoukmasterprod=tesco.com";        }                if (window.performance !== undefined) {          if (window.performance.timing !== undefined) {            if (typeof localStorage.getItem === 'function') {              var sDOMReady = localStorage.getItem("perfDOMReady"),                       sWindowLoad = localStorage.getItem("perfWindowLoad");                                                     if (typeof s.events !== 'undefined' && s.events !== '') {                s.events = s.events + ",";              } else {                s.events = '';              }                            if (sDOMReady) {                sDOMReady = parseInt(sDOMReady);              }                            if (sWindowLoad) {                sWindowLoad = parseInt(sWindowLoad);              }                            if (sDOMReady > 0) {                s.events = s.events + "event88=" + sDOMReady;              }                           if (sWindowLoad > 0) {                s.events = s.events + ",event89=" + sWindowLoad;              }        /* Start GFO-1949 */        require(['modules/searchify/common'], function(searchify) {            if (typeof searchify.prototype.processAnalytics === 'function') {                searchify.prototype.processAnalytics();            }        });        /* End GFO-1949 */              if (sDOMReady > 0 && sWindowLoad > 0) {          sDOMReady = getAnalyticsTimeBucket(sDOMReady);          sWindowLoad = getAnalyticsTimeBucket(sWindowLoad);          s.prop26 = sDOMReady + "|" + sWindowLoad;        }            }          }        }      }    }    catch (e) {}  }/* End - PreAnalytics Call */function getAnalyticsTimeBucket(sTime) {  var sBucket = sTime;  if (sTime > 0 && sTime < 500) {    sBucket = '00.0 < 00.5';  } else if (sTime < 1000) {    sBucket = '00.5 < 01.0';  } else if (sTime < 2000) {    sBucket = '01.0 < 02.0';  } else if (sTime < 3000) {    sBucket = '02.0 < 03.0';  } else if (sTime < 4000) {    sBucket = '03.0 < 04.0';  } else if (sTime < 5000) {    sBucket = '04.0 < 05.0';  } else if (sTime < 7500) {    sBucket = '05.0 < 07.5';  } else if (sTime < 10000) {    sBucket = '07.5 < 10.0';  } else if (sTime < 15000) {    sBucket = '10.0 < 15.0';  } else {    sBucket = '15+';  }   return sBucket;}/* Start - Performance Logging */$(window).load(function() {  var tDOMReady,    tDOMStart,    tDOMFinish,    tWindowLoad;  try {       if (window.performance !== undefined) {      if (window.performance.timing !== undefined) {        if (typeof localStorage.setItem === 'function') {          setTimeout(function() {            tDOMStart = window.performance.timing.domContentLoadedEventStart - window.performance.timing.responseEnd;            tDOMFinish = window.performance.timing.domComplete - window.performance.timing.domContentLoadedEventEnd;            tDOMReady = tDOMFinish + tDOMStart;            tWindowLoad = window.performance.timing.loadEventEnd - window.performance.timing.connectEnd;                        if (window.performance.timing.responseEnd === 0 || window.performance.timing.domContentLoadedEventEnd === 0 || window.performance.timing.connectEnd === 0) {              tDOMStart = null;              tDOMFinish = null;              tDOMReady = null;              tWindowLoad = null;              return;            }                        localStorage.setItem("perfDOMReady", tDOMReady);            localStorage.setItem("perfWindowLoad", tWindowLoad);            tDOMStart = null;            tDOMFinish = null;            tDOMReady = null;            tWindowLoad = null;          }, 2000);        }      }    }    } catch(e) {    }});/* End - Performance Logging *//* Start - Special Offer Link in Buy Box */window.buyBoxSpecialOffer = function buyBoxSpecialOffer() {    require(['modules/common'], function(common) {        if (common.isPage('PDP')) {                        $promoContainer = $('#product-promotions');            $stickyHeader = $(".mastSticky");            $promoOffers = $promoContainer.find("h3").text();                        if ($promoContainer.length) {                $(".product-description .linkSaveButton").before('<a href="#product-promotions" class="buy-box-special-offer"><strong>' + $promoOffers + '</strong> - quick look</a>');                $(".buy-box-special-offer").on("click", function(e){              e.preventDefault();              $('html, body').animate({              scrollTop: $promoContainer.offset().top - 125                       }, 1000);                return false;                         })            }        }    })};/* End - Special Offer Link in Buy Box *//* -----------------------------------------   Basket Summary Fix----------------------------------------- */// Start - Defect for Sticky sidebar on touch devices require(['modules/sticky-sidebar/common', 'modules/common', 'modules/breakpoint'], function(stickySidebar, common, breakpoint) {  if (common.isTouch()) {    stickySidebar.init = function (data) {      var self = stickySidebar;      if (common.isTouch()) {        if (!data.$wrapper.length || !data.$primary.length || !data.$secondary.length) {          return;        }      }           self.$wrapper = data.$wrapper;      self.$primary = data.$primary;      self.$secondary = data.$secondary;                }        stickySidebar.isBlocked = function(){      var self = stickySidebar;      return (breakpoint.mobile || !self.$secondary.length);    };        $(window).load(function() {           stickySidebar.handleResize(false);    });  }});// End - Defect for Sticky sidebar on touch devices/* -----------------------------------------   Recommender Fix----------------------------------------- */// Start - Recommender blocks to equalise heights and show imagesrequire(['modules/tile-carousel/common', 'modules/common', 'modules/product-tile/common'], function(tileCarousel, common, productTile) {   var legacyInit = tileCarousel.init;     common.deferredInit.push(function($elem) {          if (typeof $elem !== 'undefined') {      productTile.Height.adjust( $elem, productTile.Ellipsis.init, false, false );    }  });  tileCarousel.init = function($elem) {     legacyInit($elem);     common.initDeferredMethods($elem);   }});// End - Recommender blocks to equalise heights and show imagesfunction preloadImages(arrayOfImages) {    $(arrayOfImages).each(function(){        $('<img/>')[0].src = this;        // Alternatively you could use:        // (new Image()).src = this;    });}/* -----------------------------------------   Website Feedback----------------------------------------- */// rate_this_page.js - partially linted and hand compressedvar custom_var,_sp='%3A\\/\\/',_rp='%3A//',_poE=0.0,_poX=0.0,_sH=screen.height,_d=document,_w=window,_ht=escape(_w.location.href),_hr=_d.referrer,_tm=(new Date()).getTime(),_kp=0,_sW=screen.width;function _fC(_u){        var i;_aT=_sp+',\\/,\\.,-,_,'+_rp+',%2F,%2E,%2D,%5F';_aA=_aT.split(',');        for(i=0;i<5;i++){eval('_u=_u.replace(/'+_aA[i]+'/g,_aA[i+5])');}return _u;}  function O_LC(new_domain){    var custom_var = "Shopping faster",newPageURL=_ht;_domain=_ht.replace('https%3A//','').replace('http%3A//','');    if(typeof new_domain==='undefined'||new_domain===''){_sp='%3A\\/\\/';_rp='%3A//';}else{_sp='%3A\\/\\/'+_domain.substr(0,_domain.indexOf('/'));_rp='%3A//'+new_domain;}_w.open('https://secure.opinionlab.com/ccc01/comment_card.asp?time1='+_tm+'&time2='+(new Date()).getTime()+'&prev='+_fC(escape(_hr))+'&referer='+_fC(newPageURL)+'&height='+_sH+'&width='+_sW+'&custom_var='+custom_var+'|'+_fC(_ht) + '|' + $.cookie('JSESSIONID'),'comments','width=535,height=192,screenX='+((_sW-535)/2)+',screenY='+((_sH-192)/2)+',top='+((_sH-192)/2)+',left='+((_sW-535)/2)+',resizable=yes,copyhistory=yes,scrollbars=no');}    function _fPe(){if(Math.random()>=1.0-_poE){O_LC();_poX=0.0;}  }  function _fPx(){          if(Math.random()>=1.0-_poX){O_LC();        }}        window.onunload=_fPx;function O_GoT(_p){  _d.write('<a href=\'\' onclick=\'\'O_LC();return false;\'>'+_p+'</a>');_fPe();}  function O_LC_plpSurvey(new_domain){    OmniturePLPSurveyNo();    var custom_var = "Shopping faster",newPageURL=_ht;_domain=_ht.replace('https%3A//','').replace('http%3A//','');    if(typeof new_domain==='undefined'||new_domain===''){_sp='%3A\\/\\/';_rp='%3A//';}else{_sp='%3A\\/\\/'+_domain.substr(0,_domain.indexOf('/'));_rp='%3A//'+new_domain;}_w.open('https://secure.opinionlab.com/ccc01/o.asp?id=PGlUrOEE&time1='+_tm+'&time2='+(new Date()).getTime()+'&prev='+_fC(escape(_hr))+'&height='+_sH+'&width='+_sW+'&custom_var='+custom_var+'|'+_fC(_ht) + '|' + $.cookie('JSESSIONID'),'comments','width=535,height=192,screenX='+((_sW-535)/2)+',screenY='+((_sH-192)/2)+',top='+((_sH-192)/2)+',left='+((_sW-535)/2)+',resizable=yes,copyhistory=yes,scrollbars=no');}function O_LC_filterSurvey(new_domain){    OmnitureFilterSurveyNo();    var custom_var = "Shopping faster",newPageURL=_ht;    _domain=_ht.replace('https%3A//','').replace('http%3A//','');    if(typeof new_domain==='undefined'||new_domain===''){      _sp='%3A\\/\\/';      _rp='%3A//';    }else{      _sp='%3A\\/\\/'+_domain.substr(0,_domain.indexOf('/'));      _rp='%3A//'+new_domain;    }    _w.open('https://secure.opinionlab.com/ccc01/o.asp?id=hUWCMaQb&time1='+_tm+'&time2='+(new Date()).getTime()+'&prev='+_fC(escape(_hr))+'&height='+_sH+'&width='+_sW+'&custom_var='+custom_var+'|'+_fC(_ht) + '|' + $.cookie('JSESSIONID'),'comments','width=535,height=192,screenX='+((_sW-535)/2)+',screenY='+((_sH-192)/2)+',top='+((_sH-192)/2)+',left='+((_sW-535)/2)+',resizable=yes,copyhistory=yes,scrollbars=no');  }/* -----------------------------------------   Filter Survey Omniture Not Helpful----------------------------------------- */function OmnitureFilterSurveyNo(){  var s=s_gi('tescoukdirectprod,tescoukmasterprod');  s.trackingServer='metrics.tesco.com';  s.linkTrackVars='events,prop38';  s.prop38= "FiltersUsefulNo";   s.tl(this,'o','FiltersUsefulNo');}function OmniturePLPSurveyNo(){  var s=s_gi('tescoukdirectprod,tescoukmasterprod');  s.trackingServer='metrics.tesco.com';  s.linkTrackVars='events,prop38';  s.prop38= "FoundProductNo";   s.tl(this,'o','FoundProductNo');}/* -----------------------------------------   Filter Survey Omniture----------------------------------------- */function OmnitureFilterSurvey(){  var s=s_gi('tescoukdirectprod,tescoukmasterprod');  s.trackingServer='metrics.tesco.com';  s.linkTrackVars='events,prop38';  s.prop38= "FiltersUseful";   s.tl(this,'o','FiltersUseful');}function OmniturePLPSurvey(){  var s=s_gi('tescoukdirectprod,tescoukmasterprod');  s.trackingServer='metrics.tesco.com';  s.linkTrackVars='events,prop38';  s.prop38= "FoundProduct";   s.tl(this,'o','FoundProduct');}$(document).ready(function(){  $("#filter-feedback-survey .filter-survey-submit").click(function(){      OmnitureFilterSurvey();      $(this).parent(".filter-survey").hide();      $(this).parent(".filter-survey").next().show();  })  $("#product-feedback-survey .filter-survey-submit").click(function(){      OmniturePLPSurvey();      $(this).parent(".filter-survey").hide();      $(this).parent(".filter-survey").next().show();  })})/* -----------------------------------------   Get Query String Code----------------------------------------- */$.urlParam = function(name){  var results = new RegExp('[\\?&]' + name + '=([^&#]*)').exec(window.location.href);  if(results){      return results[1] || 0;  }}var tabs = {    containerClass : '.accordion-container',    containerHeader : '.acc-tabs .accordion-header',    containerContent : '.accordion-content',   init: function(callbefore,callback){        $(tabs.containerHeader).click(function(){            var parent = $(this).parent();            tabs.toggle(parent,callback);        })    },    toggle: function(element,callback) {        var element = $(element);        if(!element.hasClass('active')){          $(tabs.containerClass).removeClass('active');          element.addClass('active');        }    }}$(document).ready(function(){    require(['modules/breakpoint'], function(breakpoint) {      if(breakpoint.largeDesktop || breakpoint.desktop){        $('.acc-tabs .accordion-header').unbind('click');        tabs.init();      }    })})/*-----------------------------------------    Msquare Promo-----------------------------------------*/var contentLimiter = {    lineCounter: function(element) {        element.setAttribute("style","display:block");        var divHeight = $(element).innerHeight(),            lineComputedHeight = window.getComputedStyle(element, null).lineHeight,            lineHeight;        if (lineComputedHeight == 'normal') {            lineHeight = parseInt($(element).css('font-size').replace('px','')) *1.2        } else if( lineComputedHeight.indexOf('px') > 1) {            lineHeight = parseInt(lineComputedHeight.replace('px',''))        }        else {            lineHeight = parseInt($(element).css('font-size').replace('px','')) *lineComputedHeight        }        element.setAttribute("style","");        return (parseInt(divHeight/lineHeight));    },    contentLimit: function(element,lineLimit,charLimit,callback,parent) {        var elementChars = $(element).text().length,            elementLines = contentLimiter.lineCounter(element);        if(charLimit < elementChars || (lineLimit !== null && lineLimit < elementLines)){                callback(parent);        }    }}var promoSlider = {            nextElement: function(parent,prices) {                var currentImage = parent.find('.cycleList .current-image'),                    nextElement = '';                currentImage.removeClass('current-image');                if (currentImage.next().length > 0) {                    nextElement = currentImage.next().addClass('current-image');                } else {                    nextElement = parent.find('.cycleList li:first-child').addClass('current-image');                }                promoSlider.changeSlide(nextElement,parent,prices);            },            prevElement: function(parent,prices) {                var currentImage = parent.find('.cycleList .current-image'),                    prevElement = '';                currentImage.removeClass('current-image');                if (currentImage.prev().length > 0) {                    prevElement= currentImage.prev().addClass('current-image');                } else {                    prevElement = parent.find('.cycleList li:last-child').addClass('current-image');                }                promoSlider.changeSlide(prevElement,parent,prices)            },            changeSlide: function(slide, parent, prices) {                parent.css('background-image', 'url(' + slide.attr('data-image-link') + ')');                if(prices == true) {                    parent.parent().find('span.old-price').text(slide.attr('data-old-price'));                    parent.parent().find('span.offer-price').text(slide.attr('data-offer-price'));                }            },            click: function(parent, element) {                if(parent.hasClass('multiple-products') && element.hasClass('left')) {                    promoSlider.prevElement(parent,true);                   } else if(parent.hasClass('multiple-products') && element.hasClass('right')) {                    promoSlider.nextElement(parent,true);                   } else if(!parent.hasClass('multiple-products') && element.hasClass('right')) {                    promoSlider.nextElement(parent,false);                   } else {                    promoSlider.prevElement(parent,false);                   }            },        }    $(document).ready(function() {        //Binding of events        $('.t-promotion-block.slider .arrow').click(function (e) {            promoSlider.click($(this).parent(),$(this))        });    });        $(window).load(function(){        var textToLimit = $('t-promotion-block');        for(var i = 0; i < textToLimit.length; i++) {            var parent = $(textToLimit[i]).parent().parent();            if($(body).hasClass('no-touch')){                contentLimiter.contentLimit(textToLimit[i].find('title')[0],null,30,hideBrokenBlock, parent);                if(parent.hasClass('slider')) {                    contentLimiter.contentLimit(textToLimit[i].find('description-text')[0],1,50,hideBrokenBlock, parent);                } else if (parent.hasClass('fullSize')) {                    contentLimiter.contentLimit(textToLimit[i].find('description-text')[0],3,150,hideBrokenBlock, parent);                }                else contentLimiter.contentLimit(textToLimit[i].find('description-text')[0],2,100,hideBrokenBlock, parent);            } else {                contentLimiter.contentLimit(textToLimit[i].find('mobile-text')[0],4,100,hideBrokenBlock, parent);            }        }        function hideBrokenBlock(element){            $(element).hide();        }    });/* -----------------------------------------   Home Furniture----------------------------------------- */ var tabbedSlider = {    click: function(){      $(".home-furniture .menu > ul > li > a").on("click", function(e){        e.preventDefault();                  if($(this).hasClass("active")){          $(".home-furniture .menu > ul > li > a").removeClass("active");          $(".home-furniture .menu > ul > li > .gallery").removeClass("active");          $(".home-furniture .menu > ul > li > div .viewer-border").removeAttr("style");        }        else{            //$(".home-furniture .menu > ul > li > .gallery").hide().fadeIn(200);            $(".home-furniture .menu > ul > li > a").removeClass("active");            $(".home-furniture .menu > ul > li > .gallery").removeClass("active");            $(".home-furniture .menu > ul > li > div .viewer-border").css({"left":"-9999em"});               $(this).next().find(".viewer-border").removeAttr("style");            $(this).addClass("active");              $(this).next().addClass("active");        }      });      },      unclick: function(){          $(".home-furniture .menu > ul > li > a").off("click");          //remove all classes and states          $(".home-furniture .menu > ul > li > a").removeClass("active");          $(".home-furniture .menu > ul > li > .gallery").removeClass("active");          $(".home-furniture .menu > ul > li > div .viewer-border").removeAttr("style");      },      hover: function(){        $(".home-furniture .menu > ul > li:not(:first-child) > div .viewer-border").css({"left":"-9999em"});        require(['modules/common','modules/breakpoint'], function(common, breakpoint) {            if(common.isTouch()){              //run click              $(".home-furniture .menu > ul > li > a").on("click", function(e){            e.preventDefault();                          if($(this).hasClass("active")){              $(".home-furniture .menu > ul > li > a").removeClass("active");              $(".home-furniture .menu > ul > li > .gallery").removeClass("active");              $(".home-furniture .menu > ul > li > div .viewer-border").removeAttr("style");            }            else{                //$(".home-furniture .menu > ul > li > .gallery").hide().fadeIn(200);                $(".home-furniture .menu > ul > li > a").removeClass("active");                $(".home-furniture .menu > ul > li > .gallery").removeClass("active");                $(".home-furniture .menu > ul > li > div .viewer-border").css({"left":"-9999em"});                  $(this).next().find(".viewer-border").removeAttr("style");                $(this).addClass("active");                  $(this).next().addClass("active");            }          });            }            else{              //run hover              $(".home-furniture .menu > ul > li > a").on("mouseenter", function(e){                  e.preventDefault();                  //$(".home-furniture .menu > ul > li > .gallery").hide().fadeIn(200);                  $(".home-furniture .menu > ul > li > a").removeClass("active");                  $(".home-furniture .menu > ul > li > .gallery").removeClass("active");                  $(".home-furniture .menu > ul > li > div .viewer-border").css({"left":"-9999em"});                    $(this).next().find(".viewer-border").removeAttr("style");                  $(this).addClass("active");                    $(this).next().addClass("active");              });            }        })      },      unhover: function(){              $(".home-furniture .menu > ul > li:first-child > a").removeClass("active");            $(".home-furniture .menu > ul > li:first-child > .gallery").removeClass("active");            $(".home-furniture .menu > ul > li > div .viewer-border").removeAttr("style");          require(['modules/common','modules/breakpoint'], function(common, breakpoint) {            if(common.isTouch()){              //run click              $(".home-furniture .menu > ul > li > a").off("click");            //remove all classes and states            $(".home-furniture .menu > ul > li > a").removeClass("active");            $(".home-furniture .menu > ul > li > .gallery").removeClass("active");            $(".home-furniture .menu > ul > li > div .viewer-border").removeAttr("style");            }            else{              $(".home-furniture .menu > ul > li > a").off("mouseenter");            }        })      },    initViewports: function(){          require(['modules/common','modules/breakpoint'], function(common, breakpoint) {           breakpoint.mobileIn.push(tabbedSlider.click);          breakpoint.mobileOut.push(tabbedSlider.unclick);                                                                  breakpoint.vTabletIn.push(tabbedSlider.click);          breakpoint.vTabletOut.push(tabbedSlider.unclick);                                  breakpoint.hTabletIn.push(tabbedSlider.hover);          breakpoint.hTabletOut.push(tabbedSlider.unhover);                                                                  breakpoint.desktopIn.push(tabbedSlider.hover);          breakpoint.desktopOut.push(tabbedSlider.unhover);                                  breakpoint.largeDesktopIn.push(tabbedSlider.hover);          breakpoint.largeDesktopOut.push(tabbedSlider.unhover);        })      },    init: function(){        var self = this;          self.initViewports();          /*require(['modules/common','modules/breakpoint'], function(common, breakpoint) {             if(breakpoint.mobile || breakpoint.vTablet){                self.click();            }            else{                self.hover();            }          })*/      }}/*-----------------------------------------        DBT Popup-----------------------------------------*//*-----------------------------------------        DBT Popup-----------------------------------------*/var dbtTooltip = {    html: '<div class="bbSeller-popup dbt-popup"><a href="#" class="close"><span class="icon" aria-hidden="true"></span><span class="label">Close</span></a><div class="content"><p>If you place a Tesco direct order by 5pm (Sunday – Friday) you can have your items delivered with you groceries from 7pm the next day, or a chosen day beyond then. If you place a Tesco direct order on a Saturday, you can have your items delivered with your groceries from 7pm on Monday (excluding bank holidays).</p></div></div>',    tooltip: '.dbt-tooltip',      lightboxClass: ".dbt-popup",    lightboxClose: ".dbt-popup .close",    lightboxContent: ".dbt-popup .content",        createLightbox: function(e){        e.preventDefault();        $(dbtTooltip.tooltip).closest(".l-33").after(dbtTooltip.html);             $("body").on("click", dbtTooltip.lightboxClose, dbtTooltip.destroyLightbox);     },    destroyLightbox: function(e){        if($(dbtTooltip.lightboxClass).length > 0){            if($(e.target).is(dbtTooltip.lightboxClose) && $(e.target).parents(dbtTooltip.lightboxClass).length){                e.preventDefault();            }            if(!$(dbtTooltip.lightboxContent).is(e.target) && !$(dbtTooltip.lightboxContent).find(e.target).length){                $(dbtTooltip.lightboxClass).remove();            }        }    },    init: function(e){        var self = this;        $(self.tooltip).on('click', self, self.createLightbox);    }}$(document).ready(function(){    dbtTooltip.init();})/*------------------------------------      Christas List------------------------------------*/$(document).ready(function(){    require(['modules/breakpoint'], function(breakpoint) {                if(breakpoint.largeDesktop || breakpoint.desktop || breakpoint.hTablet){            $(".christmas-list .accordion-header").unbind("click");            $(".christmas-list .accordion-content").removeAttr("style").show();        }     })})/*------------------------------------      Accordion------------------------------------*/var accordion = {    containerClass : '.accordion-container',    containerHeader : '.accordion-header',    containerContent : '.accordion-content',        init: function(callbefore,callback){        $(accordion.containerHeader).click(function(){            var parent = $(this).parent();            accordion.toggle(parent,callback);        })    },    toggle: function(element,callback) {        var element = $(element);        if(element.hasClass('active')){            accordion.hide(element,callback)        } else accordion.show(element,callback)    },    show: function(element,callback){        var element = $(element);        if(element.hasClass('close-all')) {            $(accordion.containerClass).removeClass('active').find(accordion.containerContent).slideUp(500);        } else if(element.hasClass('close-siblings')) {            element.siblings().removeClass('active').find(accordion.containerContent).slideUp(500);        }        element.addClass('active')            .find('> .accordion-content').slideDown(500,callback);    },    hide: function(element,callback){        var element = $(element);        if(element.find('.accordion-content').length > 1) {            element.find('.accordion-content').slideUp(500,callback)                .parent().removeClass('active');        } else {            element                .find('> .accordion-content').slideUp(500,callback)                .parent().removeClass('active');        }    }}$(document).ready(function(){    accordion.init();})/*-----------------------------------------    Christmas List-----------------------------------------*/$(document).ready(function(){    require(['modules/breakpoint'], function(breakpoint) {        if(breakpoint.largeDesktop || breakpoint.desktop || breakpoint.tablet){            $(".christmas-list .accordion-header").unbind("click");            $(".christmas-list .accordion-content").addClass("active");        }     })})/* -----------------------------------------   Cookie Code----------------------------------------- */var cookies = function(){  return{    set:function(name, value, days, domain){      if (days) {        var date = new Date();        date.setTime(date.getTime()+(days*24*60*60*1000));        var expires = "; expires="+date.toGMTString();      }      else var expires = "";      if (!domain){        domain = ".tesco.com";      }      document.cookie = name+"="+value+expires+";domain=" + domain + ";path=/";    },    read:function(name){      var nameEQ = name + "=";      var ca = document.cookie.split(';');      for(var i=0;i < ca.length;i++) {        var c = ca[i];        while (c.charAt(0)==' ') c = c.substring(1,c.length);        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);      }      return null;    },    cookiesEnabled:function(){      document.cookie = "__verify=1";      var supportsCookies = document.cookie.length > 1 &&                             document.cookie.indexOf("__verify=1") > -1;      var thePast = new Date(1976, 8, 16);      document.cookie = "__verify=1;expires=" + thePast.toUTCString();      return supportsCookies;    }  }}();/*Rate the Video New Window*/function ratevideo(strUrl) {  window.open(strUrl, 'Rate_The_Video','width=535,height=192,screenX='+((_sW-535)/2)+',screenY='+((_sH-192)/2)+',top='+((_sH-192)/2)+',left='+((_sW-535)/2)+',resizable=yes,copyhistory=yes,scrollbars=no');} $(document).ready(function () { /*-------------------------------   features slider     ---------------------------------*/     $(".windows10-upgrade-details").each(function() {                         $(".windows10-upgrade-details h3").click(function() {                $(".windows10-upgrade-details h3").hide();               });             $(".close").click(function() {                $(this).parent("div").slideUp();                 $(".windows10-upgrade-details h3").show(300);               });                          });   /*-------------------------------   features slider     ---------------------------------*/     $(".windows10-block-module3 ul li").hover(function() {    if($(this).hasClass("show-slide")){        $(this).removeClass("show-slide");        $(this).children("h3").css("background-color" , "#002050");        }        else {        $(this).addClass("show-slide");        $(this).children("h3").css("background-color" , "#0078d7");               }      });     $(".windows10-block-module3 ul li").click(function() {    if($(this).hasClass("show-slide")){        $(this).removeClass("show-slide");        }        else {        $(this).addClass("show-slide");        }      });   $(".windows10-block-module3 ul li").click(function() {     if($(this).hasClass("show-slide")){          $(this).removeClass("show-slide");          }          else {          $(this).addClass("show-slide");          }    });});/* -----------------------------------------   Publishing UI----------------------------------------- */var pui = {        accordion: {        accordion: '.pui-accordion',        click: function(evt){          require(['modules/common','modules/breakpoint'], function(common, breakpoint) {            var self = evt.data;                //set target                var target = $(evt.target);                //set target parent                var parent = target.closest("section");            //set target section            var section = target.next();            if(breakpoint.mobile && !$("body").hasClass("windows-10")){              var template = "<h1>" + target.html() + "</h1><div class='pui-accordion'><section><div><a href='#' class='back'>Back to " + $("h1").text() +"</a>" + section.html() + "<a href='#' class='back'>Back to " + $("h1").text() + "</a></div></section></div>";               common.virtualPage.show({                  content: template              });            }            else{              //if(!target.hasClass("pui-active")){                    //slide up current active                    //$("div.pui-active", parent).slideToggle();                    //remove active state                    //$(".pui-active", parent).removeClass("pui-active");                    //apply new active state and show                    //target.addClass("pui-active").next().addClass("pui-active").slideToggle();            target.toggleClass("pui-active");            section.toggleClass("pui-active").slideToggle("fast");                    //}            }          });                 },              rightSideClick:function(evt){          require(['modules/common','modules/breakpoint'], function(common, breakpoint) {            var self = evt.data;                //set target                var target = $(evt.target);                //set target parent                var parent = target.closest("section");            //set target section            var section = target.next();            if(breakpoint.mobile){              var template = "<h1>" + target.html() + "</h1><div class='pui-accordion'><section><div><a href='#' class='back'>Back to " + $("h1").text() +"</a>" + section.html() + "<a href='#' class='back'>Back to " + $("h1").text() + "</a></div></section></div>";               common.virtualPage.show({                  content: template               });            }            else if(breakpoint.hTablet || breakpoint.vTablet || breakpoint.desktop){              //if(!target.hasClass("pui-active")){                    //slide up current active                    //$("div.pui-active", parent).slideToggle();                    //remove active state                    //$(".pui-active", parent).removeClass("pui-active");                    //apply new active state and show                    //target.addClass("pui-active").next().addClass("pui-active").slideToggle();            target.toggleClass("pui-active");            section.toggleClass("pui-active").slideToggle("fast");                    //}            }          });        },        rightSideAdd:function(){            $(".seller-info-accordion .pui-right-side").addClass("pui-active").siblings().attr("style","display:block");        },        rightSideRemove:function(){            $(".seller-info-accordion .pui-right-side").removeClass("pui-active").siblings().attr("style","display:none");        },        halfOpenAdd:function(){             $(".seller-info-accordion .pui-half-open").siblings().attr("style","display:block;height:169px;");        },        halfOpenRemove:function(){            $(".seller-info-accordion .pui-half-open").siblings().attr("style","display:none");        },        halfOpenClick:function(evt){            require(['modules/common','modules/breakpoint'], function(common, breakpoint) {                var self = evt.data;                //set target                var target = $(evt.target);                //set target parent                var parent = target.closest("section");                //set target section                var section = target.next();                var link = section.find(".toggle-link");                if(breakpoint.mobile){                  var template = "<h1>" + target.html() + "</h1><div class='pui-accordion'><section><div><a href='#' class='back'>Back to " + $("h1").text() +"</a>" + section.html() + "<a href='#' class='back'>Back to " + $("h1").text() + "</a></div></section></div>";                   common.virtualPage.show({                      content: template                   });                }                else{                  if(link.text() === "More"){                    section.css({"height": "auto","padding-bottom":"50px"});                    link.text("Less");                  }                  else if(link.text() === "Less"){                    section.css({"height": "169px","padding-bottom":"50px"});                    link.text("More");                  }                }            })        },        toggleLinkClick:function(evt){          var target = $(evt.target);          var parent = target.closest("div");          if(target.text() === "More"){            parent.css({"height": "auto","padding-bottom":"50px"});            target.text("Less");          }          else if(target.text() === "Less"){            parent.css({"height": "169px","padding-bottom":"50px"});            target.text("More");          }        },        initSellerInfoViewports:function(){            require(['modules/common','modules/breakpoint'], function(common, breakpoint) {                breakpoint.largeDesktopIn.push(pui.accordion.rightSideAdd);                breakpoint.largeDesktopOut.push(pui.accordion.rightSideRemove);                breakpoint.mobileIn.push(pui.accordion.halfOpenRemove);                breakpoint.mobileOut.push(pui.accordion.halfOpenAdd);            })        },        init:function(){                        var self = this;            //for each accordion set on click method            $(self.accordion).each(function(){              if($(self.accordion).hasClass("seller-directory-accordion")){                $("section", ".seller-directory-accordion").children("h3, div").addClass("pui-active");                                       //set click                    $("> section > h3", this).each(function(){                        if($.trim($(this).next().html()).length){                                    $(this).on("click", self, self.click);                        }                    })                              }          else if($(self.accordion).hasClass("seller-info-accordion")){                                        require(['modules/common','modules/breakpoint'], function(common, breakpoint) {                                               $("section", self.accordion).each(function() {                                                                //h3                            if(breakpoint.desktop || breakpoint.hTablet || breakpoint.vTablet || breakpoint.mobile){                                if($("h3", this).hasClass("pui-right-side")){                                    $("h3", this).removeClass("pui-active")                                    $(this).children("div").slideUp();                                }                            }                            if(!$("h3",this).hasClass("pui-active")){                                $(this).children("div").slideUp();                            }                              $("h3:not(.pui-half-open, .pui-right-side)", this).each(function(){                                                            if($.trim($(this).next().html()).length){                                    $(this).on("click", self, self.click);                                }                              });                                $("h3.pui-right-side", this).each(function(){                                                            if($.trim($(this).next().html()).length){                                    $(this).on("click", self, self.rightSideClick);                                }                              });                             $("h3.pui-half-open", this).each(function(){                                   //if($(this).siblings().height() > 101){                                  if(!breakpoint.mobile){                                    $(this).siblings().animate({"height":"169px"}).css({"padding-bottom":"50px"});                                  }                                  $(this).siblings().children("div").after("<a href='javascript:void(0);' class='toggle-link'>More</a>");                                  if($.trim($(this).next().html()).length){                                      $(this).on("click", self, self.halfOpenClick);                                  }                                //}                              });                                                     $(".toggle-link", this).on("click", self, self.toggleLinkClick);                                               });                    });                      self.initSellerInfoViewports();                      }                           else{                /*//add active state to first h3 and first div                $("section h3", this).eq(0).addClass("pui-active").show();                  $("section div", this).eq(0).addClass("pui-active").show();                  //hide all but first div                  $("section:first", this).siblings().children("div").slideUp();*/          $("section").each(function() {            if($(this).children().is("h3")){              if (!$("h3",this).hasClass("pui-active")){                $(this).children("div").slideUp();              }              }            else if($(this).children().is("h2")){              if (!$("h2",this).hasClass("pui-active")){                $(this).children("div").slideUp();              }              }                });                    //set click                    $("h3", this).each(function(){                        if($.trim($(this).next().html()).length){                                    $(this).on("click", self, self.click);                        }                    })                    $("h2", this).each(function(){                        if($.trim($(this).next().html()).length){                                    $(this).on("click", self, self.click);                        }                    })                  }                       })                }        }}/*------------------------------------------        Seller Info Popup------------------------------------------*/var sellerInfo = {  buybox: ".seller",  logo: ".header-wrapper > div",  sellerId: "",  fileLocation: "/directuiassets/SiteAssets/NonSeasonal/en_GB/sellers/seller popup/",  lightboxClass: ".bbSeller-popup",  lightboxMask: ".bbSeller-mask",  lightboxClose: ".bbSeller-popup .close",  lightboxContent: ".bbSeller-popup .content",  createLightbox: function(e){    sellerInfo.setSellerId(e.target);    if(sellerInfo.sellerId !== "1000001"){      e.stopImmediatePropagation();      sellerFile = sellerInfo.fileLocation + sellerInfo.sellerId + ".html";      $.get(sellerFile, function(data){          if($("#Seller-" + sellerInfo.sellerId).parent(".seller").parent('div.other-sellers').length > 0){            $("#Seller-" + sellerInfo.sellerId).parent(".seller").after(data);          }          else{            $("#Seller-" + sellerInfo.sellerId).parent(".seller").append(data);          }          $("body," + sellerInfo.lightboxClose).on("click", self, sellerInfo.destroyLightbox);      });    }  },  destroyLightbox: function(e){    if($(sellerInfo.lightboxClass).length > 0){      if($(e.target).is(sellerInfo.lightboxClose) && $(e.target).parents(sellerInfo.lightboxClass).length){        e.preventDefault();      }      if(!$(sellerInfo.lightboxContent).is(e.target) && !$(sellerInfo.lightboxContent).find(e.target).length){        $(sellerInfo.lightboxClass).remove();        $(sellerInfo.lightboxMask).remove();    }    }  },  setSellerId: function(e){    sellerInfo.sellerId = $(e).closest(sellerInfo.buybox).find("div:first").prop('id').replace('Seller-', '');  },  init: function(){    var self = this;    if(!window.isKiosk()){        $(self.logo).off("click").on("click", self.createLightbox);    }       }}var sellerInfoTabs = {                                click: function(evt){                                                var target = $(evt.target).parent().parent()                                                var tab = target.attr("aria-controls");                                                $(".seller-info-tabs-list ul > li").removeClass("active");                                                target.addClass("active");                                                                                                $(".seller-info-tabs-container > div").removeClass("seller-info-tab-active");                                                $(".seller-info-tabs-container").find("[aria-labelledby=" + tab + "]").addClass("seller-info-tab-active");                                },                                init: function(){                                                                                                $(".seller-info-tabs-list ul > li").each(function(i){                                                                var tab = $(this);                                                                tab.attr("role","tab");                                                                tab.attr("aria-controls","tab-item-" + i);                                                                if(document.URL.indexOf("catId=") >= 0 || document.URL.indexOf("ourProducts") >= 0 || document.URL.indexOf("sortBy=") >= 0){                                                                  if(i === 1){                                                                    tab.addClass("active");                                                                  }                                                                }                                                                else if(i === 0){                                                                                tab.addClass("active");                                                                }                                                })                                                $(".seller-info-tabs-container > div").each(function(i){                                                                var tab = $(this);                                                                tab.attr("aria-labelledby","tab-item-" + i).addClass("seller-info-tab-content");                                                                if(document.URL.indexOf("catId=") >= 0 || document.URL.indexOf("ourProducts") >= 0 || document.URL.indexOf("sortBy=") >= 0){                                                                  if(i === 1){                                                                    tab.addClass("seller-info-tab-active");                                                                  }                                                                }                                                                else if(i === 0){                                                                                tab.addClass("seller-info-tab-active");                                                                }                                                })                                                $(".seller-info-tabs").find("[role=tab]").on("click", sellerInfoTabs.click);                                }}/* -----------------------------------------   Buying Guide----------------------------------------- */  var buyingGuide = {    id: "#buying-guide-homepage",    virtualPage: "buying-guide-home-vp",    activeClass: "pui-active",    click: function(){      require(['modules/common','modules/breakpoint'], function(common, breakpoint) {         $("#buying-guide-homepage > li").on("click", function(evt){          evt.preventDefault();          var target = $(evt.target);          var template = "<h1>Buying Guide</h1><section><a href='#' class='back'>Back to Buying Guides</a><h2>" + target.text() + " buying guide</h2>" + target.next().clone().wrap('<div/>').parent().html() + "<a href='#' class='back'>Back to Buying Guides</a></section>";           common.virtualPage.show({            content: template,            customClass: "buying-guide-home-vp"           });        });      })    },    unclick: function(){      $("#buying-guide-homepage > li").off("click");      $("#buying-guide-homepage > li > a, #buying-guide-homepage > li > ul").removeClass("pui-active");    },    hover: function(){      require(['modules/common','modules/breakpoint'], function(common, breakpoint) {        if(common.isTouch()){          $("#buying-guide-homepage > li").on("click", function(){            $(this).siblings().children("a, ul").removeClass("pui-active");            $(this).children("a, ul").addClass("pui-active");                    })        }        else{          $("#buying-guide-homepage > li").on("mouseenter", function(){            $(this).children("a, ul").addClass("pui-active");                    })          $("#buying-guide-homepage > li").on("mouseleave", function(){            $(this).children("a, ul").removeClass("pui-active");                    })        }      })    },    unhover: function(){        $("#buying-guide-homepage > li").off("mouseenter mouseleave");    },    initViewports: function(){        require(['modules/common','modules/breakpoint'], function(common, breakpoint) {         breakpoint.mobileIn.push(buyingGuide.click);        breakpoint.mobileOut.push(buyingGuide.unclick);                                                              breakpoint.vTabletIn.push(buyingGuide.click);        breakpoint.vTabletOut.push(buyingGuide.unclick);                              breakpoint.hTabletIn.push(buyingGuide.click);        breakpoint.hTabletOut.push(buyingGuide.unclick);                                                              breakpoint.desktopIn.push(buyingGuide.hover);        breakpoint.desktopOut.push(buyingGuide.unhover);                              breakpoint.largeDesktopIn.push(buyingGuide.hover);        breakpoint.largeDesktopOut.push(buyingGuide.unhover);      })    },    init: function(){      var self = this;      if($(self.id).length > 0){        self.initViewports();      }      require(['modules/common','modules/breakpoint'], function(common, breakpoint) {         if(breakpoint.mobile || breakpoint.hTablet || breakpoint.vTablet){          self.click();        }        else{          self.hover();        }      })    }}/*------------------------------------------        Brand Wall------------------------------------------*/var brandWall = {  hideTiles: function(){    $("div.brandwall:gt(7)").hide();   },  showTiles: function(){    $("div.brandwall:gt(7)").show();  },  createLink: function(){    var self = this;    $('.brandwall-last').after('<div><a href="javascript:void(0);" class="brandwall-toggleLink">Show More</div>');    $(".brandwall-toggleLink").on("click", function(){      if($(".brandwall-toggleLink").text() === "Show More"){        $(".brandwall-toggleLink").text("Show Less").addClass("brandwall-active");        brandWall.showTiles();      }      else if($(".brandwall-toggleLink").text() === "Show Less"){        $(".brandwall-toggleLink").text("Show More").removeClass("brandwall-active");        brandWall.hideTiles();      }    })  },  destroyLink:function(){    var self = this;    $(".brandwall-toggleLink").off("click").remove();  },  initViewports: function(){    require(['modules/common','modules/breakpoint'], function(common, breakpoint) {       breakpoint.mobileIn.push(brandWall.hideTiles, brandWall.createLink);      breakpoint.mobileOut.push(brandWall.showTiles, brandWall.destroyLink);      breakpoint.vTabletIn.push(brandWall.hideTiles, brandWall.createLink);      breakpoint.vTabletOut.push(brandWall.showTiles, brandWall.destroyLink);    })  },  init: function(){    var self = this;    if($(".brandwall").length > 0){      self.initViewports();      require(['modules/common','modules/breakpoint'], function(common, breakpoint) {        if(breakpoint.mobile || breakpoint.vTablet){          self.createLink();          self.hideTiles();        }      })      $(".brandwall").last().css({"margin-bottom":"16px"});    }  }}/* -----------------------------------------   PDP Social Buttons Tracking----------------------------------------- */function pdpSocialButtons(socialMedia){  console.log(socialMedia);  var s=s_gi('tescoukdirectprod,tescoukmasterprod');  s.trackingServer='metrics.tesco.com';  s.linkTrackVars='events,prop35';  s.linkTrackEvents='event13';  s.prop35= socialMedia;   s.events='event13';  s.tl(this,'o','SocialMediaClicks');}/*---------------------  hudl-carousel -----------------------*//** * hudlCarousel Module : Image carousel *//*global define: true */  var hudlCarousel = {    element: null,              //carousel ID    images: null,             //Image container    slider: null,             //Slider container (touch)    widget: null,             //Slider widget (touch)    buttons: null,              //Click buttons (click)    posX: 0,                //initial position offset when using touch start on slider    buttonWidth: 0,             //Width of button container so slider can match    sliderOffsetX: 0,           //slider offset    sliderWidth: 0,             //slider width    widgetWidth: 0,             //slider widget width    imagesWidth: 0,             //Total images width    liWidth: 0,               //width of each LI containing an image    constraint: {      start: 0,      end: 0    },                    //Contraints for slider widget    numItems: 3,              //Number of images/items    activeItem: 0,              //Index of active image/item    sliderTimer: null,            //Slider Timer for timeout of display    slideshowInterval: 10000,       //Slideshow pause between images    slideshowTimer: null,         //Timer for slideshow    slideshowStopped: false,        //Has the slideshow been stopped?    slideshowTimeout: null,         //slidershow timeout triggered when paused before restarting    imagesOffset: 0,            //Offset of image container    draggingOffset: 0,            //ofset to calculate touch position    hudlBackgroundColours: [],    /**     * Calculate item to be set as active when using the touch slider     * @param  {Int} x X touch position on the slider     */    calculateItem: function (x) {      var spacing = (hudlCarousel.constraint.end - hudlCarousel.constraint.start) / hudlCarousel.numItems,        ai = Math.floor(x / spacing);      if (ai >= hudlCarousel.numItems) {        ai = hudlCarousel.numItems - 1;      }      if (ai < 0) {        ai = 0;      }      if (ai !== hudlCarousel.activeItem) {        hudlCarousel.activeItem = ai;        hudlCarousel.setActiveItem();      }    },    /**     * Set the active item and animate into place using CSS/JS based on browser     */    setActiveItem: function () {      var newPos;      $('li', hudlCarousel.buttons).eq(hudlCarousel.activeItem).addClass('active')      .siblings().removeClass('active');    $('.product-info').attr('class', 'product-info ' + (hudlCarousel.element.find('li').eq(hudlCarousel.activeItem).children('a').attr('class')))            require(['modules/common','modules/breakpoint'], function(common, breakpoint) {       //do a modern browser check      if (common.isModern()) {        //use 3dtransform for animation        newPos = ((100 / hudlCarousel.numItems) * hudlCarousel.activeItem);        hudlCarousel.images.css({          '-webkit-transform': 'translate3d(' + -newPos + '%,0,0)',          '-moz-transform': 'translate3d(' + -newPos + '%,0,0)',          '-ms-transform': 'translate3d(' + -newPos + '%,0,0)',          '-o-transform': 'translate3d(' + -newPos + '%,0,0)',          'transform': 'translate3d(' + -newPos + '%,0,0)'        });      } else {        //use js for animation        newPos = 100 * hudlCarousel.activeItem;        hudlCarousel.images.animate({'left': -newPos + '%'}, 500);      }      })    },    /**     * Handle click event for next image button     * @param  {event} evt Click event     */    next: function (evt) {      if (evt) {        hudlCarousel.stop();      }      if (!hudlCarousel.images.hasClass('.dragging')) {        if (hudlCarousel.activeItem < (hudlCarousel.numItems - 1)) {          hudlCarousel.activeItem++;        } else {          hudlCarousel.activeItem = 0;        }                hudlCarousel.setActiveItem();      }    },    swipeLeft: function(evt){      if(window.isKiosk()){        hudlCarousel.pause();      }else{        hudlCarousel.stop();      }      if (hudlCarousel.activeItem !== (hudlCarousel.numItems - 1)) {        evt.preventDefault();        hudlCarousel.next();      }      hudlCarousel.setActiveItem();    },    swipeRight: function(evt){      if(window.isKiosk()){        hudlCarousel.pause();      }else{        hudlCarousel.stop();      }      if (hudlCarousel.activeItem !== 0) {        evt.preventDefault();        hudlCarousel.previous();      }      hudlCarousel.setActiveItem();    },    /**     * Handle click event for previous image button     * @param  {event} evt Click event     */    previous: function (evt) {      if (evt) {        hudlCarousel.stop();      }      if (!hudlCarousel.images.hasClass('.dragging')) {        if (hudlCarousel.activeItem > 0) {          hudlCarousel.activeItem--;        } else {          hudlCarousel.activeItem = (hudlCarousel.numItems - 1);        }      }      hudlCarousel.setActiveItem();    },    /**     * Sart slideshow after clearing any residual timers or timeouts     * @param  {event} evt Event     */    start: function (evt) {      if (evt) {        evt.preventDefault();      }      window.clearInterval(hudlCarousel.sliderTimer);      window.clearInterval(hudlCarousel.slideshowTimeout);      hudlCarousel.slideshowTimeout = setInterval(function () {        hudlCarousel.next();      }, hudlCarousel.slideshowInterval);    },    /**     * pause slideshow     * @param  {event} evt Event     */    pause: function (evt) {      if (evt) {        evt.preventDefault();      }      window.clearInterval(hudlCarousel.slideshowTimer);      window.clearTimeout(hudlCarousel.slideshowTimeout);    },    /**     * Stop the slideshow and restart after 6 seconds     * @param  {event} evt Event     */    stop: function (evt) {      if (evt) {        evt.preventDefault();      }      window.clearInterval(hudlCarousel.slideshowTimer);      window.clearTimeout(hudlCarousel.slideshowTimeout);      //pause for 10 seconds after an interaction before starting the slideshow again      hudlCarousel.slideshowTimeout = setTimeout(function () {        hudlCarousel.start();      }, 6000);    },    generateButtons: function(){      //generate buttons      var i = hudlCarousel.numItems,        buttons = '';      while (i--) {        buttons += '<li><div class="inner"></div></li>';        hudlCarousel.hudlBackgroundColours.push(i);      }      hudlCarousel.buttons.html(buttons);    },    init: function(){            var hudlBackgroundColours = new Array(),        selectedList = [];      var hudlColours = new Array('black','blue','orange','pink','violet','white');        hudlColours.sort(function(){return 0.5 - Math.random()});        hudlColours.unshift('red');         for(var i = 0; i < 3; i++){        hudlBackgroundColours.push(hudlColours[i]);        var selectedColour = $("#hudl-main-banner #hudl-carousel .color-" + hudlColours[i]);          selectedColour.find("> div").attr('data-picture','');        selectedList.push(selectedColour.closest('li').clone());        }        $("#hudl-main-banner #hudl-carousel .images").html('');        $.each(selectedList, function (key, val) {          $("#hudl-main-banner #hudl-carousel .images").append(val);        });      picturefill();      hudlCarousel.element = $('#hudl-carousel');      if(hudlCarousel.element.length){        hudlCarousel.images = $('#hudl-carousel .images');        hudlCarousel.slider = $('#hudl-carousel-slider');        hudlCarousel.widget = $('#hudl-carousel-slider .widget');        hudlCarousel.buttons = $('#hudl-carousel .buttons');        //set number of images in the carousel        hudlCarousel.numItems = 3;        //set width of .images        hudlCarousel.images.css({width: (hudlCarousel.numItems * 100) + '%'});        //set image width        hudlCarousel.liWidth = (100 / hudlCarousel.numItems) + '%';        $('li', hudlCarousel.images).css({width: hudlCarousel.liWidth});        $('.wrapper', hudlCarousel.element).css({height: 'auto'});        hudlCarousel.generateButtons();        hudlCarousel.setActiveItem(); //set the first item        hudlCarousel.start(); //kick off the slideshow        return true;      }else{        return false;      }    }  };/*----------------------------  hudl-carousel navigation -------------------------------*//*global define: true */require(['modules/common'], function(common){  /**   * Handle click Events   * @param  {event} evt   */  hudlCarousel.click = function (evt) {    hudlCarousel.stop();    var target = $(evt.target).closest('li');    hudlCarousel.activeItem = $(target).index();    hudlCarousel.setActiveItem();  };  /**   * Toggle navigation buttons when not touch   * @param  {event} evt Click event   */  hudlCarousel.toggleNavButtons = function (evt) {    switch (evt.type) {      case('mouseenter'):        $('.navButton', hudlCarousel.element).addClass('show');        break;      case('mouseleave'):        $('.navButton', hudlCarousel.element).removeClass('show');        break;    }  };  hudlCarousel.bindEvents = function(){    //No Touch (Desktop/Mouse)    $('li', hudlCarousel.buttons).on('click', hudlCarousel.click);    $('.wrapper, .navButton', hudlCarousel.element).on('mouseleave mouseenter', hudlCarousel.toggleNavButtons);    $('.navButton.next').on('click', hudlCarousel.next);    $('.navButton.prev').on('click', hudlCarousel.previous);    if(window.isKiosk()){      common.kioskSwipe('left', $('.wrapper', hudlCarousel.hudlCarousel), hudlCarousel.swipeLeft);      common.kioskSwipe('right', $('.wrapper', hudlCarousel.hudlCarousel), hudlCarousel.swipeRight);    }else{      hudlCarousel.images.on('mouseenter', hudlCarousel.pause);      hudlCarousel.images.on('mouseleave', hudlCarousel.start);    }  };  $(document).ready(function(){      if(hudlCarousel.init()){  hudlCarousel.bindEvents();        }  });    })/*------------------------------------------    Responsive Tables------------------------------------------*/var switched = false;                    //Viewport Switch  var updateTables = function() {    if (($(window).width() < 767) && !switched ){   // if width <= 767px      switched = true;                                    $("table.responsive-table").each(function(i, element) {        splitTable($(element));                           // Activate split table function      });      return true;    }    else if (switched && ($(window).width() > 767)) {            // if width > 767px      switched = false;      $("table.responsive-table").each(function(i, element) {        unsplitTable($(element));                                // Activate Unsplit Function      });    }  };     $(window).load(updateTables);  $(window).on("redraw",function(){switched=false;updateTables();}); // An event to listen for  $(window).on("resize", updateTables);       function splitTable(original)                                        // Function to split table   {    original.wrap("<div class='table-outer-wrapper' />");        var copy = original.clone();    copy.find("td:not(:first-child), th:not(:first-child)").css("display", "none");    copy.removeClass("responsive-table");        original.closest(".table-outer-wrapper").append(copy);    copy.wrap("<div class='pinned-new-table' />");    original.wrap("<div class='scrollable-table' />");  }    function unsplitTable(original) {    original.closest(".table-outer-wrapper").find(".pinned-new-table").remove();    original.unwrap();    }/* -----------------------------------------   Document Ready----------------------------------------- */ $(document).ready(function(){  /*------------------------------------------      Hudl Ratings  ------------------------------------------*/  if($("#hudl-main-banner").length > 0){      var url = "http://api.bazaarvoice.com/data/products.json?passkey=asiwwvlu4jk00qyffn49sr7tb&apiversion=5.5&displaycode=1235-en_gb&filter=id%3aeq%3a397-7926&stats=reviews&filteredstats=reviews&filter_reviews=contentlocale%3aeq%3aen_au%2cen_ca%2cen_de%2cen_gb%2cen_ie%2cen_nz%2cen_us&filter_reviewcomments=contentlocale%3aeq%3aen_au%2cen_ca%2cen_de%2cen_gb%2cen_ie%2cen_nz%2cen_us";      $.get(url, function (data)      {                      var numReviews = data.Results[0].TotalReviewCount || 0;                      var starRating  = data.Results[0].ReviewStatistics.AverageOverallRating || 0;                       var reviewCount=('<span>' + '(' + numReviews  + ' ' + 'customer reviews)' + '</span>');                      document.getElementById("hudl-review-counts").innerHTML=reviewCount;                       var hudlRating = starRating.toFixed(1);                      document.getElementById("hudl-rating").innerHTML=hudlRating;                               var ratingStr=starRating.toString();                      var afterComma = ratingStr.substr(ratingStr.indexOf(".") +1);                      var charSubstr=afterComma.substr(0,1);                      var percentage=charSubstr*10;                                                                                                                                                                                                                                                                                                                                                                                      rating = Math.floor(starRating);                          var starUnicode='2605';                          var starChar = '\\u' + starUnicode;                          var res = String.fromCharCode(parseInt(starUnicode,16));                         markup = [];                           for(var i = 1; i <= rating; i++) {                      markup.push('<div class="hudlStars">' + res + '</div>')                      }                      markup.push('<div class="hudlFloatStar"><span style="width:' + Math.abs((percentage)) +'%">' + res + '</span></div>')                                            document.getElementById("hudl-stars").innerHTML=markup.join('');                                              })  }  /*------------------------------------------      Clearance  ------------------------------------------*/  var aSyncBrowseBaseURL = "/direct/blocks/productlisting/asyncBrowse.jsp?%%catID%%&sortBy=1&eventId=%%eventID%%&offset=0&responseToRender=&offset=0&loadMoreTile=false";  require(['modules/tesco.utils'], function(utils){    $(".clearance_onhover").each(function(){      var $clearanceLink = $(this).find('a'),        aLinkParams = utils.getURLParams($clearanceLink.prop('href')),        sProductCountDataURL = aSyncBrowseBaseURL.replace(/%%eventid%%/gi, $clearanceLink.data('eventid')),        $itemCount = $(this).find('.clerence_item_count');      try{        if(aLinkParams['catId']){          sProductCountDataURL = sProductCountDataURL.replace(/%%catID%%/g, "catId=" + aLinkParams['catId']);        } else {          sProductCountDataURL = sProductCountDataURL.replace(/%%catID%%/gi, "");        }      } catch (e) {        sProductCountDataURL = sProductCountDataURL.replace(/%%catID%%/gi, "");      }      if($itemCount.text() === ''){        $.ajax({          type: "GET",          url: sProductCountDataURL,          dataType: "json",          beforeSend: function(jqXHR, settings){            settings.url = sProductCountDataURL;            return;          },          success: function(oData){            if (typeof oData === 'string') {              oData = $.parseJSON(oData);            }            if (oData.totalProductsCount) {              $itemCount.text(oData.totalProductsCount + ' Items');            }          },        })      }    })  })  /*------------------------------------------      Check Secure  ------------------------------------------*/  if(document.URL.indexOf("https://") < 0){    $("body").addClass("publishing-non-secure");  }  /*----------------------------------      Hide External Link Kiosk  ----------------------------------*/  if(window.isKiosk()){     $('.flyout_external-link').parent().remove();                                         }  //hudl configurator override  $('.case-category.category-selector').find('#variant-form input[name="colour"]').val('');  $('.add-to-basket-container .add-to-basket').on('click', function () {    var $this = $(this),        isNotLoggedIn = $.cookie("DYN_USER_ID");        if ($this.hasClass('out-of-stock')) {        if (!isNotLoggedIn && $('.configurator-container').hasClass('has-case')) {            $this.removeAttr('data-action');            registerStockOverride();        } else {            $this.attr('data-action', 'add-to-basket');        }    }        function registerStockOverride() {        var $parentContainer = $('.product-selector.tablet'),            $form = $parentContainer.find('.basket-form-action form'),            $manageAlerts = $parentContainer.find('.basket-form-action .btn-manage-stock-alerts'),            hasForm = $form.length > 0,            hasManageAlertsLink = $manageAlerts.length > 0;                $form.find('input[type="submit"][name*="AlertFormHandler.set"]').attr('type', 'hidden');                if (hasForm) {            $form.submit();        } else if (hasManageAlertsLink) {            window.location.href = $manageAlerts.attr('href');        }            }  });  //initialise pui  pui.accordion.init();  //intiailise buying guide homepage  buyingGuide.init();  //intiailise brandwall  brandWall.init();    tabbedSlider.init();       /*----------------------------        Top Ten    ----------------------------*/    $('.top-ten-plp .grid-20').hover(function(){        $(this).find(".top-ten-plp-pop-up").toggleClass('active');                });    $('.offers-page .additional').hide();    $(".offers-page .less").hide();      $('.offers-page #page-container .first').addClass('active').show();     $('.offers-page .less').click(function(e){        e.preventDefault();        var current = $(this).closest('div').find(".additional.active");        var prev = current.prev('.additional');        if(prev.length){            current.hide().removeClass('active');            prev.addClass('active').show();            $(this).closest('div').find(".more").show();        }        if (!prev.prev(".additional").length){            $(this).closest('div').find(".less").hide();        }    });    $('.offers-page .more').click(function(e){        e.preventDefault();        var current = $(this).closest('div').find(".additional.active");        var next = current.next('.additional');        if(next.length){            current.hide().removeClass('active');            next.addClass('active').show();            $(this).closest('div').find(".less").show();        }        if (!next.next(".additional").length){            $(this).closest('div').find(".more").hide();        }    });    $(".offers-page .sign-up").on("click", function( e ) {        e.preventDefault();        $("body, html").animate({             scrollTop: $( $(this).attr('href') ).offset().top         }, 800);    });    /*-----------------------------------------        See More    -----------------------------------------*/    $('.module-twelve .see-more').on("click", function(){      var link = $(this),          additional = $(this).parent().find('.additional');          additional.slideToggle('slow', function(){            if(link.hasClass('active')){              link.removeClass("active").text('See More');            } else {              link.addClass("active").text('See Less');            }          })    });     /*-------------------------------   hudl features slider     ---------------------------------*/     $(".hudl2-block-module3 ul li").hover(function() {    if($(this).hasClass("show-slide")){        $(this).removeClass("show-slide");        }        else {        $(this).addClass("show-slide");        }      });     $(".hudl2-block-module3 ul li").click(function() {    if($(this).hasClass("show-slide")){        $(this).removeClass("show-slide");        }        else {        $(this).addClass("show-slide");        }      });    /*---------------------------    Large Kitchen Appliances Lightbox  ---------------------------*/    $(".large-kitchen-appliances-trigger").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {        var template = $(".large-kitchen-appliances-lightbox").html();         overlay.show({            content: template,            customClass: 'ecoupon-lightbox-container',                    callback: function() {        $("#lightbox.ecoupon-lightbox-container .continue-shopping").on("click", function(e){            e.preventDefault();            $(".ecoupon-lightbox-container").fadeOut("slow", function(){            $(this).remove();            $("#overlay").remove();            $("#wrapper").removeClass("no-scroll").removeAttr("style");          })        });      }        });   });  });   /*---------------------------      Brand Store Lightbox  ---------------------------*/     $(".brand-store-lightbox-trigger").click(function() {        require(['modules/common','modules/overlay/common'], function(common, overlay) {            var template = $(".brand-store-lightbox-content").html();             overlay.show({                content: template,                customClass: 'ecoupon-lightbox-container'            });        });    });      /*---------------------------    Sitewide Ecoupon Lightbox  ---------------------------*/    $(".sitewide-ecoupon-lightbox-trigger").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {        var template = $(".sitewide-ecoupon-lightbox").html();         overlay.show({            content: template,            customClass: 'ecoupon-lightbox-container',                    callback: function() {        $("#lightbox.ecoupon-lightbox-container .continue-shopping").on("click", function(e){            e.preventDefault();            $(".ecoupon-lightbox-container").fadeOut("slow", function(){            $(this).remove();            $("#overlay").remove();            $("#wrapper").removeClass("no-scroll").removeAttr("style");          })        });      }        });   });  });  /*------------------------------    Clubcard Boost Lightbox  ------------------------------*/  if(!window.isKiosk()){    $(".bcve-buy-box").click(function(e){      e.preventDefault();      require(['modules/common','modules/overlay/common'], function(common, overlay) {          var template = '<div class="ecoupon-lightbox"><img align="left" src="/directuiassets/Merchandising/NonSeasonal/en_GB/banners/Responsive/events/ClubcardBoost_Lightbox_562x467.jpg" alt="E-Coupon"><div><h2 class="ecoupon-voucher-header"><span>Clubcard Boost now </span>on selected products with the Clubcard Boost icon </h2> <p class="ecoupon-voucher">How does it work? </p><ol><li>Your vouchers are waiting for you at the Tesco direct checkout </li><li>Add the vouchers you want to use and they will double automatically</li><li>The value of your Boost vouchers will be taken from your order, saving you money</li></ol><a href="#" class="continue-shopping tertiary-button">Continue shopping</a></div></div>';          overlay.show({              content: template,              customClass: 'ecoupon-lightbox-container',              callback: function() {                $("#lightbox.ecoupon-lightbox-container .continue-shopping").on("click", function(e){                  e.preventDefault();                  $(".ecoupon-lightbox-container").fadeOut("slow", function(){                    $(this).remove();                    $("#overlay").remove();                    $("#wrapper").removeClass("no-scroll").removeAttr("style");                  })                });              }          })      })    })  } /*----------------------------    Buying Guide PDP Block  ------------------------------*/  try{    if($("#wrapper.product").length > 0){      var buyingGuideXml, parentCat, buyingGuideURL, buyingGuideName, xmlCount;            $.ajax({        type: "GET",        url: "/directuiassets/SiteAssets/NonSeasonal/en_GB/data/BuyingGuideDataJSON.xml",        dataType: "json",        beforeSend: function(jqXHR, settings) {      settings.url = "/directuiassets/SiteAssets/NonSeasonal/en_GB/data/BuyingGuideDataJSON.xml";      return;    },    success : function(data) {          buyingGuideXml = $(data);        },        complete : function(){          parentCat = $('meta[name="parent_category"]').attr("content");          xmlCount = buyingGuideXml[0].buyingGuideData.category.length;          for (var i = 0; i < xmlCount; i++) {                    if(buyingGuideXml[0].buyingGuideData.category[i].ID == parentCat){               buyingGuideURL = buyingGuideXml[0].buyingGuideData.category[i].buyingGuideURL;               buyingGuideName = buyingGuideXml[0].buyingGuideData.category[i].buyingGuideName;               $(".buying-guide-block-pdp").attr("href", buyingGuideURL);               $(".buying-guide-block-pdp .buying-guide-name").text(buyingGuideName);               $(".buying-guide-block-pdp").show();               break;            }                      };        }            });    }   }  catch (e) {}  /*------------------------------    Mobile Footer Show  ------------------------------*/  require(['modules/breakpoint'], function(breakpoint) {      if(breakpoint.mobile){      $("#footer .accordion .accordion-element:first").addClass("accordion-item-active");    }  })  /*---------------------------    Ecoupon Lightbox  ---------------------------*/    $(".ecoupon-lightbox-trigger").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {        var template = $(".ecoupon-lightbox-content").html();         overlay.show({            content: template,            customClass: 'ecoupon-lightbox-container',      callback: function() {        $("#lightbox.ecoupon-lightbox-container .continue-shopping").on("click", function(e){          e.preventDefault();          $(".ecoupon-lightbox-container").fadeOut("slow", function(){            $(this).remove();            $("#overlay").remove();            $("#wrapper").removeClass("no-scroll").removeAttr("style");          })        });      }        });   });  });       /*---------------------------------    Hudl Colors Lightbox  -----------------------------------*/  $(".colors-lightbox").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $(".hudl-colors-lightbox").html();         overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });    /*---------------------------------    Hudl child Safety Lightbox  -----------------------------------*/  $(".hudl-child-safety-lightbox").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $($.trim($(".child-safety-lightbox").html())),        iframe = template.find('iframe');        if (iframe.data('src')) {            iframe.attr('src', iframe.data('src'));        }        overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });      /*---------------------------------    Hudl help Lightbox  -----------------------------------*/  $(".help-lightbox").click(function() {     require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $($.trim($(".hudl-help-lightbox").html())),        iframe = template.find('iframe');        if (iframe.data('src')) {            iframe.attr('src', iframe.data('src'));        }        overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });   /*---------------------------------    Hudl Blinkbox Music Lightbox  -----------------------------------*/$(".hudl-blinkbox-music-lightbox").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $($.trim($(".blinkbox-music-lightbox").html())),        iframe = template.find('iframe');        if (iframe.data('src')) {            iframe.attr('src', iframe.data('src'));        }        overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });    /*---------------------------------    Hudl Blinkbox Movie Lightbox  -----------------------------------*/  $(".hudl-blinkbox-movie-lightbox").click(function() {    require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $($.trim($(".blinkbox-movie-lightbox").html())),        iframe = template.find('iframe');        if (iframe.data('src')) {            iframe.attr('src', iframe.data('src'));        }        overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });      /*---------------------------------    Hudl Blinkbox Book Lightbox  -----------------------------------*/  $(".hudl-blinkbox-book-lightbox").click(function() {     require(['modules/common','modules/overlay/common'], function(common, overlay) {      var template = $($.trim($(".blinkbox-book-lightbox").html())),        iframe = template.find('iframe');        if (iframe.data('src')) {            iframe.attr('src', iframe.data('src'));        }        overlay.show({          content: template,          customClass: 'ecoupon-lightbox-container'      });    });  });  /*-------------------------------------      Kiosk Only Images  -------------------------------------*/  if(window.isKiosk()){      $(".kiosk-only-image").each(function(){          $(this).attr('data-picture','');      })      picturefill();  }/*----------------------------       Hudl Stars------------------------------*/if($("#hudl-main-banner").length > 0){    var url = "http://api.bazaarvoice.com/data/products.json?passkey=asiwwvlu4jk00qyffn49sr7tb&apiversion=5.5&displaycode=1235-en_gb&filter=id%3aeq%3a397-7926&stats=reviews&filteredstats=reviews&filter_reviews=contentlocale%3aeq%3aen_au%2cen_ca%2cen_de%2cen_gb%2cen_ie%2cen_nz%2cen_us&filter_reviewcomments=contentlocale%3aeq%3aen_au%2cen_ca%2cen_de%2cen_gb%2cen_ie%2cen_nz%2cen_us&callback=?";    $.getJSON(url, function (data)    {                    var numReviews = data.Results[0].TotalReviewCount || 0;                    var starRating  = data.Results[0].ReviewStatistics.AverageOverallRating || 0;                     var reviewCount=('<span>' + '(' + numReviews  + ' ' + 'customer reviews)' + '</span>');                    document.getElementById("hudl-review-counts").innerHTML=reviewCount;                     var hudlRating = starRating.toFixed(1);                    document.getElementById("hudl-rating").innerHTML=hudlRating;                           var ratingStr=starRating.toString();                    var afterComma = ratingStr.substr(ratingStr.indexOf(".") +1);                    var charSubstr=afterComma.substr(0,1);                    var percentage=charSubstr*10;                                                                                                                                                                                                                                                                                                                                                                                rating = Math.floor(starRating);                        var starUnicode='2605';                        var starChar = '\\u' + starUnicode;                        var res = String.fromCharCode(parseInt(starUnicode,16));                       markup = [];                         for(var i = 1; i <= rating; i++) {                                    markup.push('<div class="hudlStars">' + res + '</div>')                    }                                    document.getElementById("hudl-stars").innerHTML=markup.join('');                                    markupLast= [];                    markupLast.push('<span style="width:' + Math.abs((percentage)) +'%">' + res + '</span>')                                                        document.getElementById("hudl-last-star").innerHTML=markupLast.join('');                                                            })}$(".event-page-text-link").click(function(e){  e.preventDefault();  var t = $(this).closest("a").attr("href");  $('html, body').animate({scrollTop: $(t).offset().top - 100}, 1000);})if($(".event-page-item-block").length > 0){    $(".row").each(function(){        $(".copy-holder", this).equaliseHeights();    })    $(window).on("breakpointChange", function() {        $(".row").each(function(){            $(".copy-holder", this).equaliseHeights();        });    });}$(".disney_page_jumper").on("click", function( e ) {     e.preventDefault();    var pos = $(this).attr('href');    $("body, html").animate({         scrollTop: $(pos).offset().top - 100    }, 900);}); $(window).on("AsyncBlockControllerComplete", function(){        require(['modules/common'], function(common) {        if (common.isPage('PDP')) {            /*------------------------------              Clubcard Boost Lightbox            ------------------------------*/            if(!window.isKiosk()){              $(".bcve-buy-box").click(function(e){                e.preventDefault();                require(['modules/common','modules/overlay/common'], function(common, overlay) {                    var template = '<div class="ecoupon-lightbox"><img align="left" src="/directuiassets/Merchandising/NonSeasonal/en_GB/banners/Responsive/events/ClubcardBoost_Lightbox_562x467.jpg" alt="E-Coupon"><div><h2 class="ecoupon-voucher-header"><span>Clubcard Boost now </span>on selected products with the Clubcard Boost icon </h2> <p class="ecoupon-voucher">How does it work? </p><ol><li>Your vouchers are waiting for you at the Tesco direct checkout </li><li>Add the vouchers you want to use and they will double automatically</li><li>The value of your Boost vouchers will be taken from your order, saving you money</li></ol><a href="#" class="continue-shopping tertiary-button">Continue shopping</a></div></div>';                    overlay.show({                        content: template,                        customClass: 'ecoupon-lightbox-container',                        callback: function() {                          $("#lightbox.ecoupon-lightbox-container .continue-shopping").on("click", function(e){                            e.preventDefault();                            $(".ecoupon-lightbox-container").fadeOut("slow", function(){                              $(this).remove();                              $("#overlay").remove();                              $("#wrapper").removeClass("no-scroll").removeAttr("style");                            })                          });                        }                    })                })              })            }            /*----------------------------              Seller PDP Lightbox            ------------------------------*/            $(".buy-from .seller.clubcard-banner-section").click(function() {              require(['modules/common','modules/overlay/common'], function(common, overlay) {                var template = $(".seller-pdp-banner-lightbox").html();                   overlay.show({                    content: template,                    customClass: 'seller-pdp-lightbox'                });              });            });            sellerInfo.init();        }    })})/*----------------------------       Delivery Options------------------------------*/if($(".hudl-delivery-options").length > 0){         $.get("/direct/blocks/catalog/productdetail/ndo/fetchDOForListing.jsp?skuId=718-1001&productId=718-1001&productShowFreeReturns=true&productShowDeliveryTimes=true&productShowClickCollect=true", function(data){                    var obj = JSON.parse(data);                    $(".buy-from.hudl-delivery-options .options").html(obj.bbSeller1);                    require(['modules/buy-from/common'], function(buyFrom) {                                leaveEvents = ' tap click',                                                enterEvents = ' tap click',                                                byFromElem = $(".hudl-delivery-options");                                                byFromElem.off(enterEvents, '.options li a');                                                byFromElem.on(enterEvents, '.options li a', function(e) {                                                       if (!$(e.target).parents('.popup').length && !$(e.target).is('.close .icon')) {                                                        buyFrom.deliveryOptionPopup(e);                                                       }                                                    else if ($(e.target).parents('.popup').length && !$(e.target).is('.close .icon')) {                                                        document.location.href = $(e.target).prop('href');                                                    }                                                });                                                                                                                                                 byFromElem.on(leaveEvents, '.popup, .popup a.close', buyFrom.deliveryOptionClose );                                                $(document).on('click', buyFrom.deliveryOptionClose );                    })                });}/*--------------------------------         Accessories Slider--------------------------------*/$(".pdp-configurator #page-container .configurator-banner .banner-msg").html("All hudl products are in <strong>Clubcard Boost</strong>");$(".hudl2-block-module3 ul li").click(function() {                                if($(this).hasClass("show-slide")){                                                                $(this).removeClass("show-slide");                                                                }                                                                else {                                                                $(this).addClass("show-slide");                                                                }                                                });  /* -----------------------------------------      Automated Product Block  ----------------------------------------- */  if(window.isKiosk()){    $("ul.category li a").find('span.kiosk-hide').parent('a').addClass("kiosk-hide");                                          }/* -------------------------------------------	Scroll to Top ---------------------------------------------*/if (!window.isKiosk()) {	$(function(){			$(window).scroll(function() {			if ($(this).scrollTop() > 200) {				$('a#back-to-top-scroll').fadeIn();			} else {				$('a#back-to-top-scroll').fadeOut();			}		});	});// scroll body to 0px on click$('a#back-to-top-scroll').click(function() {	$('body, html').animate({		scrollTop: 0		}, 600);		return false;	});}	    // Fix for vouchers not in sync in checkout on various scenarios. Defect 52297.  // This is only a temp fix. Permanent fix will be done in JSPs and below code can be removed post GMO8  $('#jsEnableCheck, .jsEnableCheck').attr('value','true');if(document.URL.indexOf("preview.direct.ukroi.tesco.org") < 0){  /*Cookie Popup*/  var tescoCookie = cookies.read("tesco_cookie_accepted");  if ($(".isKiosk").length <= 0) {    if(tescoCookie == null || tescoCookie == 0){      $(".tesco-cookie").show();      cookies.set("tesco_cookie_accepted",1, 7305);    }  }  $(".tesco-cookie-accept").click(function(){    $(".tesco-cookie").hide();  });}  /*Breadcrumb Fix*/  $('#breadcrumb li a span').each(function() {     $(this).text($(this).text().replace('Responsive', ''));   });   /*Scroll to first pixel hiding address bar*/  setTimeout(function () {      if($(window).scrollTop() == 0){          window.scrollTo(0, 1);      }  }, 1000);       /* -----------------------------------------      Interactive Banners  ----------------------------------------- */  if($(".interactive-banner-range").length > 0){    $(".interactive-banner-range-buttons a").each(function(){      var prodName, prodPrice, prodDesc, prodImg, prodURL, prodLightbox, prodSku, prodLightboxCode, prodRating, reviewURL;        prodSku = this.id.substring(this.id.length - 8);      prodURL = "/betadirect/product/" + prodSku + ".prd";      prodLightbox = $(this).parents(".interactive-banner-range");      reviewURL = "http://reviews.tesco.com/1235direct/" + prodSku + "/reviews.htm?format=noscript";      $.get(prodURL, function(data) {          prodName = $(data).find("h1").html();        if($(data).find(".current-price").length > 0){          prodPrice = $(data).find(".current-price").html();        }        else{          prodPrice = " ";        }                    prodImg = $(data).find(".pdp-main-image .products-wrapper .products li:first-child .thumbnail img").attr("src");          prodDesc = $(data).find("#product-details").html();             prodLightboxCode = '<div class="interactive-banner-lightbox" id="lightbox-' + prodSku + '"><a class="interactive-banner-lightbox-close" href="javascript:void(0);">close</a><img src="' + prodImg + '" alt="' + prodName + '"><h2>' + prodName + '</h2><p><strong>Catalogue Number: </strong>' + prodSku + '</p><p class="pricing">' + prodPrice + '</p><div class="desc">' + prodDesc + '</div><a href="' + prodURL + '" class="button input-standard search-button">More Info</a></div>';        prodLightbox.append(prodLightboxCode);      }).done(function() {        //$(".interactive-banner-loading").hide();        // $("#rotatingbanner-container-interactive-range").show();        //only show plus symbols here when loaded          $(".interactive-banner-lightbox-close").click(function(){          $(".interactive-banner-lightbox").hide();          $(".interactive-banner-overlay").hide();        });      });    });   }  $(".interactive-banner-range-buttons a").click(function(){    $(".interactive-banner-lightbox").hide();    $(".interactive-banner-overlay").show();    prodSku = this.id.substring(this.id.length - 8);    $("#lightbox-" + prodSku).show();  });  /*-------------------------------------------    Seller-directory-accordion-link  `-------------------------------------------*/  require(['modules/breakpoint'], function(breakpoint) {    if(!breakpoint.mobile){      $(".seller-directory-links a").click(function() {        var target = $(this).attr('href');        $(target).each(function(){          $("section", this).each(function(){            if(!$("h3", this).hasClass("deactive-seller")){              $("h3", this).addClass("pui-active");              $("div", this).addClass("pui-active").show();            }          });        });      });    }  }) /*-------------------------------------------  Seller Info Tabs -------------------------------------------*/  sellerInfoTabs.init(); })$(document).on('tap click', '#main-menu a', function(e) {   $elem = $(e.target);  if (!$elem.is('a')) {  $elem = $elem.closest('a'); }  window.location.href = $elem.attr('href');});// Start - Defect (No ID) - SVP Request stock alert fix to allow form to post to backendrequire(['modules/buy-from/common'], function(buyFrom) {  buyFrom.buyBoxQty = function () {       var buyBoxQty = $('.buy-from .buy form');    buyBoxQty.each(function(){      $(this).validate({        submitHandler: function (form) {          if (!$(form).find('.stock-alerts').length) {                      var $buyBoxInput = $(form).find('.quantity input');                        var buyBoxInputRange = buyFrom.isRangeValid($buyBoxInput);            if(buyBoxInputRange){              form.submit();            }            else{              buyFrom.throwQuantityValidationError($buyBoxInput);              return false;            }          }          else {                          form.submit();          }        }      });    });         }});// End - Defect (No ID) - SVP Request stock alert fix to allow form to post to backend /*Click and collect message*/function clickandCollectAfterAjax() {  var clickandcollect =$("li").hasClass("click-collect");    if($.trim(clickandcollect) ==="true"){      $("#Seller-1000001").parent().addClass("tesco-store");      $(".click-collect-block-tesco").insertAfter(".tesco-store .click-collect");  // $(".click-collect-block-tesco").insertAfter(".click-collect");      $(".tesco-store .click-collect-block-tesco").css("display" ,"block")}}// stockAlertfunction MVTAfterAjax() { window.deliverySaverFixPDP(); clickandCollectAfterAjax();}$(document).ready(function(){  MVTAfterAjax()})// Start - QC Defect 54195 - Kiosk allowPrint client side functionalityrequire(['modules/product-description/common'], function(pdp) {   try {    pdp.kioskMetaData = function() {      // We have no hook on NDO completion, so we need to introduce a delay in the intrim      window.setTimeout(function() {                var $catNo = $(".cat-no");        var $sellerName = $('.buy-from .seller .details span[itemprop="seller"]');        var $productDesc = $("h1.page-title");        var $currentPrice = $('.buy-from .seller .current-price');        var $deliveryOptionsOld = $(".delivery");        var $deliveryOptionsNew = $(".newDeliveryOptions");         if($catNo.length) {          var catNo = $catNo.text();          catNo = catNo.replace("Catalogue Number:", "").replace(/\s/g, '');        }        if($sellerName.length) {          var sellerName = $sellerName.first().text(); // test this on multiple sellers        }        if($productDesc.length) {          var productDescRaw = $productDesc.text();          var productDescTmp = $.trim(productDescRaw);          var productDesc = productDescTmp.replace(/"/g, "&quot;");             }        if($currentPrice.length) {          var currentPriceRaw = $currentPrice.first().text().replace(/\u00A3/g, '');          var currentPrice = $.trim(currentPriceRaw);        }        if($deliveryOptionsNew.length) {          var deliveryOptions = '';          $deliveryOptionsNew = $deliveryOptionsNew.first().find('ul li:visible a');          $deliveryOptionsNew.each(function(){            var textRaw = $(this).text();            var textClean = $.trim(textRaw);                          deliveryOptions += textClean + '|';          });           } else {          var deliveryOptions = '';          $deliveryOptionsOld = $deliveryOptionsOld.first().find('ul li');          $deliveryOptionsOld.each(function(){            var textRaw = $(this).text();            var textClean = $.trim(textRaw);                          deliveryOptions += textClean + '|';           });        }        function removeLastPipe(deliveryOptions){          if(deliveryOptions.substring(deliveryOptions.length-1) == "|"){            deliveryOptions = deliveryOptions.substring(0, deliveryOptions.length-1);          }          return deliveryOptions;        }        deliveryOptions = removeLastPipe(deliveryOptions);        if(sellerName === 'Tesco'){          $('head').append( '<meta name="sellerName" content="'+sellerName+'" />' )               .append( '<meta name="productDesc" content="'+productDesc+'" />' )               .append( '<meta name="catNo" content="'+catNo+'" />' )               .append( '<meta name="price" content="'+currentPrice+'" />' )               .append( '<meta name="deliveryOptions" content="'+deliveryOptions+'" />' )               .append( '<meta name="allowPrint" content="true" />' );        }         else {          $('head').append( '<meta name="sellerName" content="" />' )               .append( '<meta name="productDesc" content="" />' )               .append( '<meta name="catNo" content="" />' )               .append( '<meta name="price" content="" />' )               .append( '<meta name="deliveryOptions" content="" />' )               .append( '<meta name="allowPrint" content="false" />' );        }      }, 2500);       }  }     catch(e) {}});// End - QC Defect 54195 - Kiosk allowPrint client side functionality// Start - QC Defect 54362      $.validator.methods.max = function( value, element, param ) {    var fValue = parseFloat(value),      fParam = parseFloat(param);       return this.optional(element) || fValue <= fParam;  };// End - QC Defect 54362// Start - App Support ViewPort logging$(document).ready(function() {      updateVPCookie = function() {    try {      require(['modules/breakpoint'], function(breakpoint) {        var sViewport;        if (window.isKiosk()) {          sViewport = 'Kiosk';            }        else {          if (breakpoint.mobile) {            sViewport = 'Mobile';          }          else if (breakpoint.vTablet) {            sViewport = 'vTablet';          }          else if (breakpoint.hTablet) {            sViewport = 'hTablet';          }          else if (breakpoint.desktop) {            sViewport = 'Desktop';          }          else if (breakpoint.largeDesktop) {            sViewport = 'LargeDesktop';          }           }           $.cookie('VP', sViewport, { 'path' : '/direct/'});          });    }    catch(e) {}  };  updateVPCookie();  $(window).resize(updateVPCookie);});// End - App Support ViewPort logging/* Start - QC Defect 54852 */$(document).ready(function() {  $('.forgotten-password > a').click(function(e) {    e.preventDefault();    window.open($(this).prop('href'));    return false;  });});/* End - QC Defect 54852 *//* Start - QC Defect 54940 */$(document).ready(function() {  require(['modules/common'], function(common) {    if (common.isPage('PDP')) {      setTimeout(function() {        try {          if (typeof s7sdk !== "undefined") {        s7sdk.Window.monitorSize = function() {          s7sdk.browser.screensize = s7sdk.browser.detectScreen();          if (Math.abs(s7sdk.Window.currentSize.h - s7sdk.browser.screensize.h) > 60) {            if (s7sdk.Window.currentSize.w !== s7sdk.browser.screensize.w || s7sdk.Window.currentSize.h !== s7sdk.browser.screensize.h) {            s7sdk.Window.currentSize = s7sdk.browser.screensize;            s7sdk.Window.sendNotifications()            }          }          if ((new Date()).getTime() > s7sdk.Window.monitorSizeTimeout) {            clearInterval(s7sdk.Window.monitorSizeTimer);            s7sdk.Window.monitorSizeTimer = null          }        };        s7sdk.common.Container.prototype.resizeByWindow = function(a, b) {          if (!this.hasCustomSize) {                this.resize(a, b)          } else {            if (this.inFullScreen) {              this.resize(a, b);              this.moveToTopLeft()            }          }          this.dispatchEvent(new s7sdk.event.ResizeEvent(s7sdk.event.ResizeEvent.WINDOW_RESIZE, a, b, false));          if ((s7sdk.browser.name == "ie") && (s7sdk.browser.version.minor > 5.5) && (s7sdk.browser.version.minor <= 8)) {            s7sdk.Window.ignoreNextResize = true          }        };          }        }        catch (e) {}      }, 4000);    }  });});/* End - QC Defect 54940 */// Start - Defect 52624 - Modified logic for expiry month when expiry year is the current yearrequire(['modules/common', 'modules/custom-dropdown/common', 'modules/breakpoint', 'modules/checkout/payment'], function(common, customDropdown, breakpoint, payment) {    payment.updateExpiryMonths = function() {               var $year = $('#expiry-year');        var $month = $('#expiry-month');        var $monthOptions = $month.find('option').clone();        var $monthItems = customDropdown.getWrapper($month).find('li').not('.alt-heading');                var curDate = new Date();        var curYear = curDate.getFullYear();        var curMonth = curDate.getMonth() + 1;        // need to clone options then remove/restore        var updateMonths = function(e) {            var year = '';      $year = $('#expiry-year');      $month = $('#expiry-month');                  // assume clicked on the custome drop down list item link            if (e && e.target.tagName.toLowerCase() === 'a') {                year = $(e.target).data('value');            }             // get the selected index from the year drop down            else {                year = $year.find('option').eq($year[0].selectedIndex).val();            }                        year = parseInt(year, 10);            // show/hide the expiry month select options based on passed year value            if (common.isTouch() && !breakpoint.kiosk) {                if (year === curYear) {                   var currentMonthSelected = $month.val();                    $month.empty();          $monthOptions.each(function() {            var $elm = $(this);            var month = parseInt($elm.val(), 10);                        if (isNaN(month) || month >= curMonth) {              if ($elm.val() === currentMonthSelected) {                $elm.prop('selected', true);              }              $month.append($elm);            }          });                    $month.next().find('.control .innerText').text($month.find('option:selected').text());        }            }             // show/hide the expiry month list items based on passed year value            else {                       $monthItems.each(function() {                    var $elm = $(this);                    var month = parseInt($elm.find('a').data('value'), 10);                                        if (isNaN(month) || month >= curMonth) {                        $elm.show();                    } else {                        $elm.hide();                    }                });            }            // only show the months available for the current year            if (year !== 'NaN' && year === curYear) {                        var monthSelectedValue = parseInt($month.val(), 10);                // if the user has made a pre selection that falls on a prevous month to the                // current then reset their selection                if (monthSelectedValue < curMonth) {                    var $opts = $month.find('option');                    // remove existing selected flag                    $opts.find(':selected').removeAttr('selected');                    // set selected back to the first/default options                    $opts.find('li').eq(0).attr('selected', 'selected');                    $month[0].selectedIndex = 0;                    $($opts).eq(0).attr('selected', 'selected');                    // update the display text for when dropdown is closed                    $month.next().find('.control .innerText').text($($opts).eq(0).text());                }            }             // show all months            else {                        // check if the expiry month select options have been modified before updating the dom                if (common.isTouch() && !breakpoint.kiosk) {          var $internalMonth = $('#expiry-month');                    if ($internalMonth.find('option').length !== $monthOptions.length) {                        $internalMonth.empty();                        $monthOptions.each(function(i) {                            $internalMonth.append($(this));                        });            $internalMonth.next().find('.control .innerText').text($month.find('option:selected').text());                    }                }                // show all expiry month list items                else {                    $monthItems.show();                }            }        };        // change event for the expiry month select element        if (common.isTouch() && !breakpoint.kiosk) {            $year.on('change', updateMonths);        }         // tap/click event for the expiry month list items links        else {            customDropdown.getWrapper($year).find('ul > li > a').on('tap click', updateMonths);        }        // update the expiry months on load in case of pre-selection        updateMonths();        }});// End - Defect 52624/* Start - QC Defect 55079 */require(['modules/checkout/payment'], function(payment) {  payment.resetExpiryMonth = function() {    var $expiryMonth, sDisplayMonth;        $expiryMonth = $('#expiry-month');    $expiryMonth.empty();        $expiryMonth.append('<option value="">MM</option>');    for (var i = 1; i <= 12; i++) {      sDisplayMonth = ("0" + i).slice(-2);      $expiryMonth.append('<option value="' + sDisplayMonth + '">' + sDisplayMonth + '</option>');    }    $expiryMonth.next('.customDropdown').find('.innerText').text('MM');  };      payment.clearPaymentDetails = function() {    payment.resetField($('#name-on-card'));    payment.resetField($('#card-number'));        $('#expiry-month').find(':selected').removeAttr('selected');    $('#expiry-year').find(':selected').removeAttr('selected');        $('#expiry-month').find('option').eq(0).attr('selected', 'selected');    $('#expiry-year').find('option').eq(0).attr('selected', 'selected');        $('#expiry-month').next('.customDropdown').find('.innerText').text('MM');    $('#expiry-year').next('.customDropdown').find('.innerText').text('YYYY');            //clearing chosed month/year values    $('#expiry-month').next('.customDropdown').find('li a.sort.current').removeClass('current');    $('#expiry-year').next('.customDropdown').find('li a.sort.current').removeClass('current');        $('.place-order').addClass('disabled');    payment.resetExpiryMonth();     };});/* End - QC Defect 55079 *//* Start - IM4886320 */require(['modules/common'], function(common) {  common.isLegacyIe = function () {    var Browser = {      IsIe: function () {        return navigator.appVersion.indexOf("MSIE") != -1;      },      Navigator: navigator.appVersion,      Version: function() {        var version = 999;        if (navigator.appVersion.indexOf("MSIE") != -1)          version = parseFloat(navigator.appVersion.split("MSIE")[1]);        return version;      }    }    if (Browser.IsIe && Browser.Version() <= 9) {       return true;    } else {      return false;    };  }  if (common.isLegacyIe()) {    var s7Checker = setInterval(function() {      if (typeof s7sdk !== "undefined") {        if (typeof s7sdk.event !== "undefined") {          if (typeof s7sdk.event.PageMouseEvent !== "undefined") {            if (typeof s7sdk.event.PageMouseEvent.issue !== "undefined") {              s7sdk.event.PageMouseEvent.issue = function() {                return;              }              clearTimeout(s7Checker);            }                         }                     }             }    }, 100);  }  });/* End - IM4886320 *//* Ping function  */$(document).ready(function(){                if($("div").hasClass("additional-seller-title")){                $(".product-ping").css("display" ,"none")                  }})/* End Ping function *//* Start - QC Defect 55701 */require(['modules/media-matrix/common'], function(mediaMatrix) {            var i, MediaProviders;      if (mediaMatrix) {    mediaMatrix.init = function init() {      if (window.TescoData !== undefined && window.TescoData.pdp !== undefined && window.TescoData.pdp.scene7 !== undefined && window.TescoData.pdp.scene7._s7VideoSet !== undefined) {        if (window.TescoData.pdp.scene7._s7VideoSet.length > 0) {          mediaMatrix.mediaDecoder(mediaMatrix._mediaTypes, mediaMatrix._mediaProviders);        } else {          $('.product-carousel-s7 .media-controls div#pdp-product-video').hide();        }      }    };        try {      mediaMatrix.mediaDefinitions();            // var held in JSP      _mediaCollectionUpdated = [];              for (i = 0; i < mediaMatrix._mediaProviders.length; i++) {        switch (mediaMatrix._mediaProviders[i].provider) {        case 'Flix Media Alternate #2':          mediaMatrix._mediaProviders[i].pattern = new RegExp('(embed\.flixfacts\.com/v2)', 'i');          break;        case 'Easy2':          mediaMatrix._mediaProviders[i].pattern = new RegExp('(media\.easy2\.com)', 'i');          break;                case 'Easy2 Alternate':           mediaMatrix._mediaProviders[i].pattern = new RegExp('(webapps\.easy2\.com)', 'i');          break;                case 'Flix Media':          mediaMatrix._mediaProviders[i].pattern = new RegExp('(embed\.flixfacts\.com/[^v2])', 'i');          break;                  case 'Flix Media Alternate':          mediaMatrix._mediaProviders[i].pattern = new RegExp('(c242173\.r73\.cf3\.rackcdn\.com)', 'i');          break;        case 'iSiteTv':          mediaMatrix._mediaProviders[i].pattern = new RegExp('(www\.isitetv\.com)', 'i');          break;                      }      }              MediaProviders = function(provider, pattern, playerType) {        this.provider = provider || null;        this.pattern = pattern || null;        this.playerType = playerType || null;        this.typeRewrite = null;        this.urlRewrite = null;      };              // New Providers      mediaMatrix._mediaProviders.push(new MediaProviders('Video Detective', new RegExp('(www\.videodetective\.net)', 'i'), 'html5'));      mediaMatrix._mediaProviders.push(new MediaProviders('Scene7', new RegExp('(tesco\.scene7\.com)', 'i'), 'html5'));      mediaMatrix._mediaProviders.push(new MediaProviders('Flix 360', new RegExp('(embed\.flix360\.com)', 'i'), 'html5'));    } catch (e) {}  }});/* End - QC Defect 55701 *//* Start - QC Defect 55741 */require(['modules/checkout/delivery/edit-collection-details', 'modules/checkout/delivery/courier', 'modules/common', 'modules/custom-dropdown/common', 'modules/checkout/delivery/new-address', 'modules/editable-addresses/common'], function(editCollectionDetails, courier, common, customDropdown, newAddress, PCA_EditableAddress) {  editCollectionDetails.update = function update(result, $target, $mobileTarget) {    var $checkbox = $target.find('.dg-d-da-nonumber'),      $courierContainer;    if ($mobileTarget && $mobileTarget.length) {      common.virtualPage.close();    }    common.customCheckBox.init( $target );    $('select', $target).each(function(){      customDropdown.init( $(this) );    });    editCollectionDetails.validation( $target );    if($('#spc-delivery2-mob').val().length > 0 && $checkbox.prop('checked')) {      $checkbox.click();    }    $courierContainer = $target.find('.edit-courier-instructions');       courier.validation($courierContainer);  };    newAddress.initialisePCAField = function($container) {            var el,         pca,        fieldLimits = { companyName: 60, flatNumber: 30, buildingName: 55, primaryStreet: 70 };           if ($("#postal-code-pca").length===0) {        $container.find('div.post-code').append('<input id="postal-code-pca" class="input postal-code-pca required highlight" type="text" title="Enter a postcode" placeholder="Enter a postcode" name="postal-code-pca" maxlength="8"><div id="ed59pz86tg22kf685176"></div>');      }      el = $container.find('input[name="postal-code-pca"]');      el.data('isAddressSelected', false);            // Global function defined in PCA library      loadCapturePlus();      if ($(".edit-address-button").length===0) {        $container.find('.pcaCapturePlusTable').after('<button class="secondary-button disabled edit-address-button">Edit</button>');      }      $container.find('div.post-code').after('<div class="manually-add-address"><div class="field-wrapper"><label for="nv-Company" class="hidden">Company name</label><input id="nv-Company" title="Please complete one of the following three fields" placeholder="Company name" name="companyname" value="" type="text" class="highlight" maxlength="'+fieldLimits.companyName+'"></div><div class="field-wrapper"><label for="nv-FlatNumber" class="hidden">Flat / unit number</label><input id="nv-FlatNumber" title="Please complete one of the following three fields" placeholder="Flat / unit number" name="flatnumber" value="" type="text" class="highlight" maxlength="'+fieldLimits.flatNumber+'"></div><div class="field-wrapper"><label for="nv-BuildingName" class="hidden">Building number / name</label><input id="nv-BuildingName" title="Please complete one of the following three fields" placeholder="Building number / name" name="buildingname" value="" type="text" class="highlight" maxlength="'+fieldLimits.buildingName+'"></div><div class="field-wrapper"><label for="nv-PrimaryStreet" class="hidden">Street</label><input id="nv-PrimaryStreet" title="Street" placeholder="Street" name="street" value="" type="text" maxlength="'+fieldLimits.primaryStreet+'"></div><div class="field-wrapper"><input id="nv-Locality" title="Locality"  name="locality" value="" type="hidden" /><input id="nv-City" title="City" placeholder="City" name="city" value="" type="hidden" /><div class="locality-city"></div></div></div>');          if ($container.find('.edit-da-block').length) {    $container = $container.find('.edit-da-block');    }      pca = new PCA_EditableAddress( newAddress, $container, true, newAddress.updatePostCodePlaceholder );            newAddress.validation.init( $container ); // initialise validation since new fields are added           };});/* End - QC Defect 55741 *//* Start - QC Defect 55743 */$(document).ready(function() {  require(['modules/checkout/payment', 'modules/tesco.data', 'modules/breakpoint', 'modules/tesco.utils', 'modules/checkout/delivery/update-options', 'modules/common'], function(payment, data, breakpoint, utils, updateOptions, common) {      $(document).off('change', '#ewallet input:checkbox');     payment.checkBoxActions = function(e) {         var context = (breakpoint.mobile) ? $('#virtual-page') : $('#main-content');          var $form = $(e.target).parent().find('form');      var request = 'selectVoucher';        var url = utils.getFormAction($form);      var $elem = $(e.target);      var DL = new data.DataLayer();      var myData = $form.serialize();      var sDeliveryPrice = '';      var $deliveryPriceMarkup = $('<p class="label">Delivery Cost:</p><p class="value"></p>');      DL.get(url, myData, null, data.Handlers.Checkout, request, null, null, function(result) {                   payment.checkboxState = [];        common.customCheckBox.init( $('#ewallet', context) );        payment.updateCta.call(e);        $('.delivery-options').find('h3').remove();               sDeliveryPrice = $('.delivery-cost-module .cost-val').text();        if (sDeliveryPrice === '') {          sDeliveryPrice = $('.delivery-cost-module .value').text();        }        $deliveryPriceMarkup.siblings('.value').text(sDeliveryPrice);             $('.delivery-cost-module').html($deliveryPriceMarkup);        $('.delivery-block').each(function() {          updateOptions.refresh(null, $(this));        });      });     };    $(document).on('change', '#ewallet input:checkbox', payment.checkBoxActions );  });});/* End - QC Defect 55743 *//* Start - QC Defect 55873 - Kiosk Payment Failure */require(['modules/chip-and-pin/kmf-io'], function(kmfIO) {  try {    kmfIO.showDialog = function showDialog(sID, sTitle, sBodyText, sYesText, sNoText, callback) {      if (sID === "paymentFailed") {        window.dialogResult = function(sID, sButton) {                    if (sButton === 'NO') {            window.external.navigateTo('ATTRACTLOOP', '');          }        };      } else {        window.dialogResult = callback;      }      if (typeof window.external.showDialog === 'unknown') {        window.external.showDialog(sID, sTitle, sBodyText, sYesText, sNoText);      }    };  }  catch (e) {}});/* End - QC Defect 55873 - Kiosk Payment Failure *//* Start - QC Defect 55890 */$(document).ready(function() {  try {    if (window.isKiosk()) {      require(['modules/common'], function(common) {        if ($('.payment .paymentMessage').length) {             common.disableAllKioskButtons();          $('.paymentMessage').after('<a href="#" class="tertiary-button" id="paymentSuccessFinish">Click here to finish shopping <span aria-hidden="true" class="icon" data-icon="r"></span></a>');          $('#paymentSuccessFinish').on('click', function() {            window.external.navigateTo('ATTRACTLOOP', '');          });        }      });    }  }  catch (e) {}});/* End - QC Defect 55890 *//* Start - QC Defect 56026 */require(['modules/checkout/delivery/datepicker', 'modules/common'], function(datepicker, common) {    if (common.isIOS() && navigator.userAgent.match(RegExp('Version/8'))) {        datepicker.init = function() {            if(!$('#integrated-registration').length){                $(document).on('click', '.datepicker-cta', datepicker.toggle);                $(document).on('click', '.datepicker-tooltip .close, .datepicker-tooltip .close-button', datepicker.toggle);                $(document).on('click', '.datepicker-tooltip .confirm-date', datepicker.get);            }            $(document).on('click', '.datepicker-tooltip', function (e) {                e.stopPropagation();            });        };    }});/* End - QC Defect 56026 *//* Start - QC Defect 56029 */$(document).ready(function() {  require(['modules/chip-and-pin/kmf-io'], function(kmfIO) {    if ($('#wrapper.spi').length && !$('#wrapper.spi.orderConfirmation').length) {          Backbone.history.on('route', function(e, sRoute, aRouteInfo) {        var sBackboneRoute = aRouteInfo[0];        if (kmfIO.checkKMFExists()) {          if (sBackboneRoute === 'payment') {            window.external.navigationPanel.logoutEnabled = false;          } else if(sBackboneRoute !== 'login') {            window.external.navigationPanel.homeEnabled = false;          }                   else {            window.external.navigationPanel.logoutEnabled = true;          }        }      });        } else {      if (kmfIO.checkKMFExists()) {        window.external.navigationPanel.logoutEnabled = true;        window.external.navigationPanel.homeEnabled = true;      }    }  });});/* End - QC Defect 56029 *//* start QC defect 56042 */require(['modules/breakpoint', 'modules/common', 'modules/checkout/delivery/datepicker', 'jquery.datepicker'], function(breakpoint, common, datepicker) {    datepicker.toggle = function(e) {        var target = e;        if (e) {            e.preventDefault();            e.stopPropagation();            target = $(e.target);        }        datepicker.setIntialDate(target);        var tooltip = target.closest('.datepicker-tooltip-module').find('.datepicker-tooltip');	if(!target.hasClass('disabled')){        if (breakpoint.mobile) {            var tooltip = target.closest('.datepicker-tooltip-module');            var content = $.trim($('<div></div>').html(tooltip.clone(true)).html());            datepicker.group = target.closest('.delivery-options');            common.virtualPage.show({                content: content,                customClass: 'datepicker-tooltip',                closeSelector: '.close-button',                callbackReady: function(el) {                    tooltip.show();                    el.find('div.datepicker').remove();                    datepicker.setIntialDate(target);                    datepicker.create(el);                    if (datepicker.isNominatedDayPage) {                        if (tooltip.hasClass('home-delivery-container')) {                            $('.delivery-options-list .date-text-show, .delivery-options-list .expected .note, .delivery-options-list .datepicker-note').hide();                        } else {                            $('.delivery-options-list li:nth-child(1), .delivery-options-list li:nth-child(2)').not('.datepicker-wrapper-holder').hide();                            $('.delivery-options-list .date-text-show, .datepicker-tooltip-module .date-time').hide();                        }                        $('#virtual-page .datepicker-tooltip').show();                        datepicker.isNominatedDayPage = true;                    }                    /*starts fix of Defect 56049 */                    if ($('.datepicker-tooltip-module').hasClass('collection-details-picker')) {                        $('#virtual-page .datepicker-tooltip .selected-date-info .label').text('Your delivery date:');                    }                    /*end fix of fix of Defect 56049 */         /*starts fix of Defect 56057 */      $('#virtual-page .datepicker-tooltip').show();      /*ENd fix of Defect 56057 */               if (el.find('.available.selected').length <= 0) {                        el.find('.available:eq(0)').addClass('selected');                    }                    if ($('.datepicker-tooltip-module').hasClass('collection-details-picker')) {                        $('.selected-date-info label').text('Your chosen date:');                    }                    $('#virtual-page .datepicker-tooltip').find('.available.selected').trigger('click');                          },                callbackOut: function(cb, e) {                    if (e && ($(e.target).hasClass('close-button') || e.type === "hashchange")) {                        if (datepicker.isNominatedDayPage) {                            $('.delivery-options-list .date-text-show').show();                        }                    }                    var editButton = $('.datepicker-cta').hasClass('edit');                    if ($('.datepicker-cta').is(':visible') && !editButton) {                        tooltip.find('.date-time').show();                    } else {                        if ($('.datepicker-tooltip-module .selected-delivery-date').length > 0) {                            tooltip.find('.date-time').hide();                        }                    }                }            });            $('#virtual-page .datepicker-tooltip-module').children().not('form:eq(0)').hide();            $('#virtual-page .datepicker-cta, #virtual-page .custom-radio, #virtual-page .type, #virtual-page .selected-delivery-date').hide();      /*starts fix of Defect 56057 */    $('#virtual-page .datepicker-tooltip').show();    /*ENd fix of Defect 56057 */        } else {            if (tooltip.hasClass('visible')) {                tooltip.removeClass('visible').hide();            } else {                tooltip.addClass('visible').show();                //only create a new date picker if there is none!                tooltip.find('div.datepicker').remove();                datepicker.create(tooltip);                if (tooltip.find('.available.selected').length <= 0) {                    tooltip.find('.available:eq(0)').addClass('selected');                    tooltip.find('.available.selected').trigger('click');                } else {                    tooltip.find('.available.selected').trigger('click');                }            }        }		}        return false;    };});/* End QC defect 56042 *//* Start - defect 56051 */require(['modules/common', 'modules/checkout/delivery/refresh-all', 'modules/checkout/delivery/lockers', 'modules/checkout/delivery/stores'], function (common, refreshAll, lockers, stores) {                     stores.init = function (params) {            var defaultOptionSelectors = '.store-options-module .stores-container .custom-radio, .more-stores-holder .custom-radio',                optionSelectors = params && params.optionSelectors ? params.optionSelectors : defaultOptionSelectors,                refreshViewMoreStores = params && params.refreshViewMoreStores ? params.refreshViewMoreStores : undefined;            $(document).off('tap click', optionSelectors).on('tap click', optionSelectors, function (e) {                stores.get(e, false, refreshViewMoreStores);                if (lockers.isLockersOn()) {                    stores.hideViewMore();                    lockers.unselectLockers();                    common.scrollToOffset($(e.target).parents('.delivery-options').offset().top);                }            });            refreshAll.reInit.push(function () {                stores.validation($('.checkout'));            });    }});/* End - defect 56051 *//* Start - QC Defect 56078 */$(document).ready(function() {  if (window.isKiosk()) {    if (/kiosk.direct.ukroi.tesco.org|ukdbt86-app-kiosk-gmo.dotcom.tesco.org/gi.test(window.location.href)) {      $('html').addClass('transactional-kiosk');    } else {      $('html').addClass('non-transactional-kiosk');    }     }});/* End - QC Defect 56078 *//* Start - QC Defect 56304 */window.deliverySaverFixPDP = function deliverySaverFixPDP() {  require(['modules/common'], function(common) {    if (common.isPage('PDP')) {      var $promotionContent = $('.productPromotionsContent .promoTitle');         if ($promotionContent.length) {               $promotionContent.each(function() {          if ($(this).text().indexOf('Delivery Saver Promotion') !== -1) {                        $(this).parents('.product-promo').remove();            var $specialOfferHeader = $('#product-promotions h3').length ? $('#product-promotions h3') : $('.buy-from .offers .show-more'),              sSpecialOfferText = $specialOfferHeader.text();              aRegExMatch = sSpecialOfferText.match(/\d/g),              iSpecialOfferCount = 0;                         if (aRegExMatch !== undefined) {              iSpecialOfferCount = parseInt(aRegExMatch[0]) - 1;              sSpecialOfferText = sSpecialOfferText.replace(aRegExMatch[0], iSpecialOfferCount);                            if (iSpecialOfferCount === 0) {                $('.product-promo-container').empty();                $specialOfferHeader.parents('.offers').remove();              } else {                                $specialOfferHeader.text(sSpecialOfferText);                if ($specialOfferHeader.data('closedtext')) {                  $specialOfferHeader.data('closedtext', sSpecialOfferText.replace(aRegExMatch[0], iSpecialOfferCount));                }                             }                         }            return;                     }        });      }    }  });};$(document).ready(function() {    window.deliverySaverFixPDP();});/* End - QC Defect 56304 */  /* Buy Box Special Offer Link */$(document).ready(function() {     buyBoxSpecialOffer();})/* Start QC Defect 56529*/$(function () {$('.pdp-configurator .red-cta.go-checkout').removeAttr('data-action').on('click', function () {        window.location.href = '/direct/basket-details/basket-details.page';    });});/* End QC Defect 56529*//* START - Defect 56602- Fix for web analytics issue in KIOSK */require(['modules/common'], function(common) {    common.init.push(function analyticsCall() {        if ($('#wrapper.spi').length && typeof(preAnalyticsCall) !== 'undefined') {            if ($.isFunction(preAnalyticsCall)) {                try {                    preAnalyticsCall();                } catch (e) {}            }        }    });});/* END - Defect 56602- Fix for web analytics issue in KIOSKs issue in KIOSK *//* Start - GFO-831 */require(['modules/checkout/common', 'modules/integrated-registration/common', 'modules/validation', 'modules/checkout/delivery', 'modules/tesco.data'], function(checkout, integratedRegistration, validationExtras, delivery, data) {  checkout.setupSPCAfterIR = function () {    var $form = $('<form/>'),      sRequest = 'setupSPCAfterIR',      sUrl = $("#lazyLoadURL").attr('data-url') + '?fromIR=true',      $elem = $form,      DL = new data.DataLayer({        singleton: true      }),      myData = {};    DL.get(sUrl, null, null, data.Handlers.Checkout, sRequest, null, null, function (result) {      $('.loader').remove();      $('body').css('position', 'static');      if ($('.registered').length) {        $('.checkout').removeClass('registered');        integratedRegistration.aboutYouComplete();        validationExtras.scrollToError($('#about-you-complete'));      }      $('.irspc-delivery-options').addClass('delivery-options').removeClass('irspc-delivery-options');      checkout.initBindings();      delivery.getInitialDeliveryDetails(true);           });  };  });/* End - GFO-831  */ /* Start - GFO-892 */ require(['modules/validation'], function (validationExtras) {     validationExtras.msg.nameOnCard.required = 'Enter the name on your card'; });  /* End - GFO-892 *//* Start - Defect GFO-1616 */ require(['modules/jargon-buster/common'], function (jargonBuster) {     var existingRunMethod = jargonBuster.run;     jargonBuster.run = function () {         if ($('#wrapper.product').length > 0) {             existingRunMethod();         }     }; });/* End- Defect GFO-1616*//* Start - Defect GFO-1856 */require(['modules/product-description/common', 'modules/tesco.utils'], function (pdp, utils) {    pdp.handleRangeAddEvent = function (e) {        $('.collectionContainer.range,.collectionContainer.look').off(pdp.clickEvent, 'input.addCollectionItem');        $('.collectionContainer.range,.collectionContainer.look').on(pdp.clickEvent, 'input.addCollectionItem', function (e) {            var $addToBasketBtn = $(this),                $form = utils.getFormByElement($addToBasketBtn),                $quantityBox = $form.find('.quantity-display'),                $inputVal = $quantityBox.val();            e.preventDefault();            if (!(/^\d{1,2}$/.test($inputVal))) {                var html = "<span class='error'><span class='icon' data-icon='8' aria-hidden='true'></span>" + $quantityBox.data("error-text") + "</span>";                require(['modules/buy-from/common'], function (buyFrom) {                    buyFrom.errorTooltip($quantityBox, html);                });                $quantityBox.val(1);                return false;            } else {                pdp.rangeAddtoBasket($addToBasketBtn, $form, $quantityBox);            }        });    }});/* End- Defect GFO-1856*//* Start - GFO-3075 */require(['modules/product-description/common', 'modules/common', 'modules/tesco.analytics', 'modules/breakpoint'], function(pdp, common, analytics, breakpoint){   pdp.bundleBlock = function () {        var urlVal = $('.collectionContainer.bundle').data('url');        if (urlVal !== '' && $('#bundleTnC').val() !== "") {            $.ajax({                url: urlVal,                complete: function (data) {                    $('.collectionContainer.bundle').html(data.responseText);                    if ($(".bundle ul.collectionItems li").length) {                        $('.bundle, .bundleButton').show();                                             } else {                        $('.bundle, .bundleButton').hide();                    }                    if (common.isTouch()) {                        if (breakpoint.desktop) {                            pdp.equalizeBundleHeights();                        } else if (breakpoint.vTablet || breakpoint.hTablet) {                         } else {                            pdp.equalizeBundleHeights(true);                        }                    } else {                        if (breakpoint.currentViewport === 'largedesktop' || breakpoint.currentViewport === 'desktop' || breakpoint.currentViewport === 'kiosk') {                            pdp.equalizeBundleHeights();                        }                    }                     pdp.pdpBlock($('#bundle'));                    picturefill();                     pdp.selectableCollectionItem.init();                }            });        }    };});/* End - GFO-3075  *//* Start - GFO-3099 */require(['modules/buy-from/common', 'modules/common'], function(buyFrom, common) {  buyFrom.init = function ($module) {    $module = $module || $("#virtualPage .buy-from");    if ($module.length) {      buyFrom.setup($module);      buyFrom.initFramework();      if (common.isPage('PDP')) {        if ($('#ndoURLContainer').data('url')) {          buyFrom.triggerNDOCall();        } else {          $('.buy-from').find('.loader').remove();        }      } else {        buyFrom.triggerNDOCall();      }      buyFrom.buyBoxQty();      common.customCheckBox.init($module);      $(".newDeliveryOptions").not(".tescoBuyBox").find(".show-all").on("click", function (e) {        e.preventDefault();        buyFrom.showItems($(this));      });      if ($("#errorDiv").length) {        var $qty = $("#errorDiv").closest('form').find('.quantity-display');        buyFrom.throwQuantityValidationError($qty);      }      if (!window.isKiosk()) {        $(".other-sellers .seller", $module).each(function () {          $(this).find('.details .header').after($(this).find('> .seller-price-info'));        });      }    }  };});/* End - GFO-3099 *//* Start - Track-min.js */if(!spindrift)var spindrift={};spindrift.setTrackingCookie=function(b){if(spindrift.track&&spindrift.track.blocks){var a=spindrift.track.blockCssSelector,b=$(b.target);if((a=b.prevAll(a).attr("id")||b.closest(a).attr("id"))&&spindrift.track.blocks[a])document.cookie=[spindrift.track.cookieName,"=",encodeURIComponent(spindrift.track.blocks[a]),"; path=/"].join("")}};$(document).ready(function(){if(spindrift.track&&spindrift.track.blocks)document.cookie=spindrift.track.cookieName+"=; expires=Fri, 3 Aug 2001 00:00:00 UTC; path=/",$("body").on('click', 'a, :submit', spindrift.setTrackingCookie)});/* End - Track-min.js *//* Start - Jira ID GFO-3827 -- Junk Characters coming in Direct Desk opening and closing timing */require(['domlib', 'modules/common', 'modules/breakpoint', 'modules/custom-dropdown/common', 'modules/checkout/delivery/refresh-all', 'modules/checkout/delivery/collection-details', 'modules/tesco.utils', 'modules/tesco.data', 	'modules/checkout/payment'], function($, common, breakpoint, dropdown, refreshAll, collectionDetails, utils, data, payment) {	collectionDetails.get = function (group, callbackFn){		collectionDetails.group = group;		//loader($('.collection-time', collectionDetails.group), 'Searching for your collection time', true);		//loader($('.delivery-cost-module .value', collectionDetails.group), '', true);		$elem = $(collectionDetails.group).find('.collection-time');				var request = 'updateCollectionTime';		var $form = utils.getFormByElement($elem);	        		var url = $elem.attr('data-url');		var DL = new data.DataLayer({singleton:true});	        		var myData = 'data:{"data"}';		DL.get(url, myData, $elem, data.Handlers.Checkout, request, null, null, function(data) {			//collectionDetails.update();			refreshAll.reInitAll();			if (typeof callbackFn === 'function') {				callbackFn();			}			if(collectionDetails.group.find('.collection-details .selected-delivery-date').length){				collectionDetails.group.find('.date-time').hide();			}			if($(".delivery-saver-message")){				payment.bindEvents();			}			var elem = $('.store-details-container .store-info-details.selected .vcard-info .store-opening-times .storefinder-openingtimes-times');				//if (elem) {				$(elem).each(function (){					if ($(this).text().length > 11)						$(this).text($(this).text().substr(0, 11));				});			//}		});		};});/* End - Jira ID GFO-3827 -- Junk Characters coming in Direct Desk opening and closing timing *//* Start - Defect ID - GFO-3395 */$(document).ready(function(){    var filterGroups = $('.filter-filterListWrap .filter-filterGroup');     for(i=1; i < filterGroups.length; i++) { $(filterGroups[i]).removeClass('filter-filterGroup_active'); }})/* End - Defect ID - GFO-3395 *//*Start - GFO-4724*/$(document).ready(function () {    var nav = $('#catalogue-nav');    if(nav.length) {        nav.on('click', '.flyout-image img', function (e) {            window.location.href = e.target.getAttribute('href');        });    }});/*end - GFO-4724*//* Start - GFO-4560 */$(window).on('ajaxFrameworkCallComplete', function() {	window.picturefill();});/* End - GFO-4560 *//* Slick Slider Carousel Plugin */!function(a){"use strict";a(jQuery)}(function(a){"use strict";var b=window.Slick||{};b=function(){function c(c,d){var f,e=this;e.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:a(c),appendDots:a(c),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev" aria-label="Previous" tabindex="0" role="button">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next" aria-label="Next" tabindex="0" role="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(a,b){return'<button type="button" data-role="none" role="button" aria-required="false" tabindex="0">'+(b+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},e.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},a.extend(e,e.initials),e.activeBreakpoint=null,e.animType=null,e.animProp=null,e.breakpoints=[],e.breakpointSettings=[],e.cssTransitions=!1,e.hidden="hidden",e.paused=!1,e.positionProp=null,e.respondTo=null,e.rowCount=1,e.shouldClick=!0,e.$slider=a(c),e.$slidesCache=null,e.transformType=null,e.transitionType=null,e.visibilityChange="visibilitychange",e.windowWidth=0,e.windowTimer=null,f=a(c).data("slick")||{},e.options=a.extend({},e.defaults,f,d),e.currentSlide=e.options.initialSlide,e.originalSettings=e.options,"undefined"!=typeof document.mozHidden?(e.hidden="mozHidden",e.visibilityChange="mozvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(e.hidden="webkitHidden",e.visibilityChange="webkitvisibilitychange"),e.autoPlay=a.proxy(e.autoPlay,e),e.autoPlayClear=a.proxy(e.autoPlayClear,e),e.changeSlide=a.proxy(e.changeSlide,e),e.clickHandler=a.proxy(e.clickHandler,e),e.selectHandler=a.proxy(e.selectHandler,e),e.setPosition=a.proxy(e.setPosition,e),e.swipeHandler=a.proxy(e.swipeHandler,e),e.dragHandler=a.proxy(e.dragHandler,e),e.keyHandler=a.proxy(e.keyHandler,e),e.autoPlayIterator=a.proxy(e.autoPlayIterator,e),e.instanceUid=b++,e.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,e.registerBreakpoints(),e.init(!0),e.checkResponsive(!0)}var b=0;return c}(),b.prototype.addSlide=b.prototype.slickAdd=function(b,c,d){var e=this;if("boolean"==typeof c)d=c,c=null;else if(0>c||c>=e.slideCount)return!1;e.unload(),"number"==typeof c?0===c&&0===e.$slides.length?a(b).appendTo(e.$slideTrack):d?a(b).insertBefore(e.$slides.eq(c)):a(b).insertAfter(e.$slides.eq(c)):d===!0?a(b).prependTo(e.$slideTrack):a(b).appendTo(e.$slideTrack),e.$slides=e.$slideTrack.children(this.options.slide),e.$slideTrack.children(this.options.slide).detach(),e.$slideTrack.append(e.$slides),e.$slides.each(function(b,c){a(c).attr("data-slick-index",b)}),e.$slidesCache=e.$slides,e.reinit()},b.prototype.animateHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.animate({height:b},a.options.speed)}},b.prototype.animateSlide=function(b,c){var d={},e=this;e.animateHeight(),e.options.rtl===!0&&e.options.vertical===!1&&(b=-b),e.transformsEnabled===!1?e.options.vertical===!1?e.$slideTrack.animate({left:b},e.options.speed,e.options.easing,c):e.$slideTrack.animate({top:b},e.options.speed,e.options.easing,c):e.cssTransitions===!1?(e.options.rtl===!0&&(e.currentLeft=-e.currentLeft),a({animStart:e.currentLeft}).animate({animStart:b},{duration:e.options.speed,easing:e.options.easing,step:function(a){a=Math.ceil(a),e.options.vertical===!1?(d[e.animType]="translate("+a+"px, 0px)",e.$slideTrack.css(d)):(d[e.animType]="translate(0px,"+a+"px)",e.$slideTrack.css(d))},complete:function(){c&&c.call()}})):(e.applyTransition(),b=Math.ceil(b),d[e.animType]=e.options.vertical===!1?"translate3d("+b+"px, 0px, 0px)":"translate3d(0px,"+b+"px, 0px)",e.$slideTrack.css(d),c&&setTimeout(function(){e.disableTransition(),c.call()},e.options.speed))},b.prototype.asNavFor=function(b){var c=this,d=c.options.asNavFor;d&&null!==d&&(d=a(d).not(c.$slider)),null!==d&&"object"==typeof d&&d.each(function(){var c=a(this).slick("getSlick");c.unslicked||c.slideHandler(b,!0)})},b.prototype.applyTransition=function(a){var b=this,c={};c[b.transitionType]=b.options.fade===!1?b.transformType+" "+b.options.speed+"ms "+b.options.cssEase:"opacity "+b.options.speed+"ms "+b.options.cssEase,b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.autoPlay=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer),a.slideCount>a.options.slidesToShow&&a.paused!==!0&&(a.autoPlayTimer=setInterval(a.autoPlayIterator,a.options.autoplaySpeed))},b.prototype.autoPlayClear=function(){var a=this;a.autoPlayTimer&&clearInterval(a.autoPlayTimer)},b.prototype.autoPlayIterator=function(){var a=this;a.options.infinite===!1?1===a.direction?(a.currentSlide+1===a.slideCount-1&&(a.direction=0),a.slideHandler(a.currentSlide+a.options.slidesToScroll)):(0===a.currentSlide-1&&(a.direction=1),a.slideHandler(a.currentSlide-a.options.slidesToScroll)):a.slideHandler(a.currentSlide+a.options.slidesToScroll)},b.prototype.buildArrows=function(){var b=this;b.options.arrows===!0&&(b.$prevArrow=a(b.options.prevArrow).addClass("slick-arrow"),b.$nextArrow=a(b.options.nextArrow).addClass("slick-arrow"),b.slideCount>b.options.slidesToShow?(b.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.prependTo(b.options.appendArrows),b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.appendTo(b.options.appendArrows),b.options.infinite!==!0&&b.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):b.$prevArrow.add(b.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},b.prototype.buildDots=function(){var c,d,b=this;if(b.options.dots===!0&&b.slideCount>b.options.slidesToShow){for(d='<ul class="'+b.options.dotsClass+'">',c=0;c<=b.getDotCount();c+=1)d+="<li>"+b.options.customPaging.call(this,b,c)+"</li>";d+="</ul>",b.$dots=a(d).appendTo(b.options.appendDots),b.$dots.find("li").first().addClass("slick-active").attr("aria-hidden","false")}},b.prototype.buildOut=function(){var b=this;b.$slides=b.$slider.children(b.options.slide+":not(.slick-cloned)").addClass("slick-slide"),b.slideCount=b.$slides.length,b.$slides.each(function(b,c){a(c).attr("data-slick-index",b).data("originalStyling",a(c).attr("style")||"")}),b.$slidesCache=b.$slides,b.$slider.addClass("slick-slider"),b.$slideTrack=0===b.slideCount?a('<div class="slick-track"/>').appendTo(b.$slider):b.$slides.wrapAll('<div class="slick-track"/>').parent(),b.$list=b.$slideTrack.wrap('<div aria-live="polite" class="slick-list"/>').parent(),b.$slideTrack.css("opacity",0),(b.options.centerMode===!0||b.options.swipeToSlide===!0)&&(b.options.slidesToScroll=1),a("img[data-lazy]",b.$slider).not("[src]").addClass("slick-loading"),b.setupInfinite(),b.buildArrows(),b.buildDots(),b.updateDots(),b.setSlideClasses("number"==typeof b.currentSlide?b.currentSlide:0),b.options.draggable===!0&&b.$list.addClass("draggable")},b.prototype.buildRows=function(){var b,c,d,e,f,g,h,a=this;if(e=document.createDocumentFragment(),g=a.$slider.children(),a.options.rows>1){for(h=a.options.slidesPerRow*a.options.rows,f=Math.ceil(g.length/h),b=0;f>b;b++){var i=document.createElement("div");for(c=0;c<a.options.rows;c++){var j=document.createElement("div");for(d=0;d<a.options.slidesPerRow;d++){var k=b*h+(c*a.options.slidesPerRow+d);g.get(k)&&j.appendChild(g.get(k))}i.appendChild(j)}e.appendChild(i)}a.$slider.html(e),a.$slider.children().children().children().css({width:100/a.options.slidesPerRow+"%",display:"inline-block"})}},b.prototype.checkResponsive=function(b,c){var e,f,g,d=this,h=!1,i=d.$slider.width(),j=window.innerWidth||a(window).width();if("window"===d.respondTo?g=j:"slider"===d.respondTo?g=i:"min"===d.respondTo&&(g=Math.min(j,i)),d.options.responsive&&d.options.responsive.length&&null!==d.options.responsive){f=null;for(e in d.breakpoints)d.breakpoints.hasOwnProperty(e)&&(d.originalSettings.mobileFirst===!1?g<d.breakpoints[e]&&(f=d.breakpoints[e]):g>d.breakpoints[e]&&(f=d.breakpoints[e]));null!==f?null!==d.activeBreakpoint?(f!==d.activeBreakpoint||c)&&(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):(d.activeBreakpoint=f,"unslick"===d.breakpointSettings[f]?d.unslick(f):(d.options=a.extend({},d.originalSettings,d.breakpointSettings[f]),b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b)),h=f):null!==d.activeBreakpoint&&(d.activeBreakpoint=null,d.options=d.originalSettings,b===!0&&(d.currentSlide=d.options.initialSlide),d.refresh(b),h=f),b||h===!1||d.$slider.trigger("breakpoint",[d,h])}},b.prototype.changeSlide=function(b,c){var f,g,h,d=this,e=a(b.target);switch(e.is("a")&&b.preventDefault(),e.is("li")||(e=e.closest("li")),h=0!==d.slideCount%d.options.slidesToScroll,f=h?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,b.data.message){case"previous":g=0===f?d.options.slidesToScroll:d.options.slidesToShow-f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-g,!1,c);break;case"next":g=0===f?d.options.slidesToScroll:f,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+g,!1,c);break;case"index":var i=0===b.data.index?0:b.data.index||e.index()*d.options.slidesToScroll;d.slideHandler(d.checkNavigable(i),!1,c),e.children().trigger("focus");break;default:return}},b.prototype.checkNavigable=function(a){var c,d,b=this;if(c=b.getNavigableIndexes(),d=0,a>c[c.length-1])a=c[c.length-1];else for(var e in c){if(a<c[e]){a=d;break}d=c[e]}return a},b.prototype.cleanUpEvents=function(){var b=this;b.options.dots&&null!==b.$dots&&(a("li",b.$dots).off("click.slick",b.changeSlide),b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).off("mouseenter.slick",a.proxy(b.setPaused,b,!0)).off("mouseleave.slick",a.proxy(b.setPaused,b,!1))),b.options.arrows===!0&&b.slideCount>b.options.slidesToShow&&(b.$prevArrow&&b.$prevArrow.off("click.slick",b.changeSlide),b.$nextArrow&&b.$nextArrow.off("click.slick",b.changeSlide)),b.$list.off("touchstart.slick mousedown.slick",b.swipeHandler),b.$list.off("touchmove.slick mousemove.slick",b.swipeHandler),b.$list.off("touchend.slick mouseup.slick",b.swipeHandler),b.$list.off("touchcancel.slick mouseleave.slick",b.swipeHandler),b.$list.off("click.slick",b.clickHandler),a(document).off(b.visibilityChange,b.visibility),b.$list.off("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.off("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.off("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().off("click.slick",b.selectHandler),a(window).off("orientationchange.slick.slick-"+b.instanceUid,b.orientationChange),a(window).off("resize.slick.slick-"+b.instanceUid,b.resize),a("[draggable!=true]",b.$slideTrack).off("dragstart",b.preventDefault),a(window).off("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).off("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.cleanUpRows=function(){var b,a=this;a.options.rows>1&&(b=a.$slides.children().children(),b.removeAttr("style"),a.$slider.html(b))},b.prototype.clickHandler=function(a){var b=this;b.shouldClick===!1&&(a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault())},b.prototype.destroy=function(b){var c=this;c.autoPlayClear(),c.touchObject={},c.cleanUpEvents(),a(".slick-cloned",c.$slider).detach(),c.$dots&&c.$dots.remove(),c.$prevArrow&&c.$prevArrow.length&&(c.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.prevArrow)&&c.$prevArrow.remove()),c.$nextArrow&&c.$nextArrow.length&&(c.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),c.htmlExpr.test(c.options.nextArrow)&&c.$nextArrow.remove()),c.$slides&&(c.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){a(this).attr("style",a(this).data("originalStyling"))}),c.$slideTrack.children(this.options.slide).detach(),c.$slideTrack.detach(),c.$list.detach(),c.$slider.append(c.$slides)),c.cleanUpRows(),c.$slider.removeClass("slick-slider"),c.$slider.removeClass("slick-initialized"),c.unslicked=!0,b||c.$slider.trigger("destroy",[c])},b.prototype.disableTransition=function(a){var b=this,c={};c[b.transitionType]="",b.options.fade===!1?b.$slideTrack.css(c):b.$slides.eq(a).css(c)},b.prototype.fadeSlide=function(a,b){var c=this;c.cssTransitions===!1?(c.$slides.eq(a).css({zIndex:c.options.zIndex}),c.$slides.eq(a).animate({opacity:1},c.options.speed,c.options.easing,b)):(c.applyTransition(a),c.$slides.eq(a).css({opacity:1,zIndex:c.options.zIndex}),b&&setTimeout(function(){c.disableTransition(a),b.call()},c.options.speed))},b.prototype.fadeSlideOut=function(a){var b=this;b.cssTransitions===!1?b.$slides.eq(a).animate({opacity:0,zIndex:b.options.zIndex-2},b.options.speed,b.options.easing):(b.applyTransition(a),b.$slides.eq(a).css({opacity:0,zIndex:b.options.zIndex-2}))},b.prototype.filterSlides=b.prototype.slickFilter=function(a){var b=this;null!==a&&(b.unload(),b.$slideTrack.children(this.options.slide).detach(),b.$slidesCache.filter(a).appendTo(b.$slideTrack),b.reinit())},b.prototype.getCurrent=b.prototype.slickCurrentSlide=function(){var a=this;return a.currentSlide},b.prototype.getDotCount=function(){var a=this,b=0,c=0,d=0;if(a.options.infinite===!0)for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;else if(a.options.centerMode===!0)d=a.slideCount;else for(;b<a.slideCount;)++d,b=c+a.options.slidesToShow,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d-1},b.prototype.getLeft=function(a){var c,d,f,b=this,e=0;return b.slideOffset=0,d=b.$slides.first().outerHeight(!0),b.options.infinite===!0?(b.slideCount>b.options.slidesToShow&&(b.slideOffset=-1*b.slideWidth*b.options.slidesToShow,e=-1*d*b.options.slidesToShow),0!==b.slideCount%b.options.slidesToScroll&&a+b.options.slidesToScroll>b.slideCount&&b.slideCount>b.options.slidesToShow&&(a>b.slideCount?(b.slideOffset=-1*(b.options.slidesToShow-(a-b.slideCount))*b.slideWidth,e=-1*(b.options.slidesToShow-(a-b.slideCount))*d):(b.slideOffset=-1*b.slideCount%b.options.slidesToScroll*b.slideWidth,e=-1*b.slideCount%b.options.slidesToScroll*d))):a+b.options.slidesToShow>b.slideCount&&(b.slideOffset=(a+b.options.slidesToShow-b.slideCount)*b.slideWidth,e=(a+b.options.slidesToShow-b.slideCount)*d),b.slideCount<=b.options.slidesToShow&&(b.slideOffset=0,e=0),b.options.centerMode===!0&&b.options.infinite===!0?b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)-b.slideWidth:b.options.centerMode===!0&&(b.slideOffset=0,b.slideOffset+=b.slideWidth*Math.floor(b.options.slidesToShow/2)),c=b.options.vertical===!1?-1*a*b.slideWidth+b.slideOffset:-1*a*d+e,b.options.variableWidth===!0&&(f=b.slideCount<=b.options.slidesToShow||b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow),c=f[0]?-1*f[0].offsetLeft:0,b.options.centerMode===!0&&(f=b.options.infinite===!1?b.$slideTrack.children(".slick-slide").eq(a):b.$slideTrack.children(".slick-slide").eq(a+b.options.slidesToShow+1),c=f[0]?-1*f[0].offsetLeft:0,c+=(b.$list.width()-f.outerWidth())/2)),c},b.prototype.getOption=b.prototype.slickGetOption=function(a){var b=this;return b.options[a]},b.prototype.getNavigableIndexes=function(){var e,a=this,b=0,c=0,d=[];for(a.options.infinite===!1?e=a.slideCount:(b=-1*a.options.slidesToScroll,c=-1*a.options.slidesToScroll,e=2*a.slideCount);e>b;)d.push(b),b=c+a.options.slidesToScroll,c+=a.options.slidesToScroll<=a.options.slidesToShow?a.options.slidesToScroll:a.options.slidesToShow;return d},b.prototype.getSlick=function(){return this},b.prototype.getSlideCount=function(){var c,d,e,b=this;return e=b.options.centerMode===!0?b.slideWidth*Math.floor(b.options.slidesToShow/2):0,b.options.swipeToSlide===!0?(b.$slideTrack.find(".slick-slide").each(function(c,f){return f.offsetLeft-e+a(f).outerWidth()/2>-1*b.swipeLeft?(d=f,!1):void 0}),c=Math.abs(a(d).attr("data-slick-index")-b.currentSlide)||1):b.options.slidesToScroll},b.prototype.goTo=b.prototype.slickGoTo=function(a,b){var c=this;c.changeSlide({data:{message:"index",index:parseInt(a)}},b)},b.prototype.init=function(b){var c=this;a(c.$slider).hasClass("slick-initialized")||(a(c.$slider).addClass("slick-initialized"),c.buildRows(),c.buildOut(),c.setProps(),c.startLoad(),c.loadSlider(),c.initializeEvents(),c.updateArrows(),c.updateDots()),b&&c.$slider.trigger("init",[c]),c.options.accessibility===!0&&c.initADA()},b.prototype.initArrowEvents=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.on("click.slick",{message:"previous"},a.changeSlide),a.$nextArrow.on("click.slick",{message:"next"},a.changeSlide))},b.prototype.initDotEvents=function(){var b=this;b.options.dots===!0&&b.slideCount>b.options.slidesToShow&&a("li",b.$dots).on("click.slick",{message:"index"},b.changeSlide),b.options.dots===!0&&b.options.pauseOnDotsHover===!0&&b.options.autoplay===!0&&a("li",b.$dots).on("mouseenter.slick",a.proxy(b.setPaused,b,!0)).on("mouseleave.slick",a.proxy(b.setPaused,b,!1))},b.prototype.initializeEvents=function(){var b=this;b.initArrowEvents(),b.initDotEvents(),b.$list.on("touchstart.slick mousedown.slick",{action:"start"},b.swipeHandler),b.$list.on("touchmove.slick mousemove.slick",{action:"move"},b.swipeHandler),b.$list.on("touchend.slick mouseup.slick",{action:"end"},b.swipeHandler),b.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},b.swipeHandler),b.$list.on("click.slick",b.clickHandler),a(document).on(b.visibilityChange,a.proxy(b.visibility,b)),b.$list.on("mouseenter.slick",a.proxy(b.setPaused,b,!0)),b.$list.on("mouseleave.slick",a.proxy(b.setPaused,b,!1)),b.options.accessibility===!0&&b.$list.on("keydown.slick",b.keyHandler),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),a(window).on("orientationchange.slick.slick-"+b.instanceUid,a.proxy(b.orientationChange,b)),a(window).on("resize.slick.slick-"+b.instanceUid,a.proxy(b.resize,b)),a("[draggable!=true]",b.$slideTrack).on("dragstart",b.preventDefault),a(window).on("load.slick.slick-"+b.instanceUid,b.setPosition),a(document).on("ready.slick.slick-"+b.instanceUid,b.setPosition)},b.prototype.initUI=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.show(),a.$nextArrow.show()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.show(),a.options.autoplay===!0&&a.autoPlay()},b.prototype.keyHandler=function(a){var b=this;a.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===a.keyCode&&b.options.accessibility===!0?b.changeSlide({data:{message:"previous"}}):39===a.keyCode&&b.options.accessibility===!0&&b.changeSlide({data:{message:"next"}}))},b.prototype.lazyLoad=function(){function g(b){a("img[data-lazy]",b).each(function(){var b=a(this),c=a(this).attr("data-lazy"),d=document.createElement("img");d.onload=function(){b.animate({opacity:0},100,function(){b.attr("src",c).animate({opacity:1},200,function(){b.removeAttr("data-lazy").removeClass("slick-loading")})})},d.src=c})}var c,d,e,f,b=this;b.options.centerMode===!0?b.options.infinite===!0?(e=b.currentSlide+(b.options.slidesToShow/2+1),f=e+b.options.slidesToShow+2):(e=Math.max(0,b.currentSlide-(b.options.slidesToShow/2+1)),f=2+(b.options.slidesToShow/2+1)+b.currentSlide):(e=b.options.infinite?b.options.slidesToShow+b.currentSlide:b.currentSlide,f=e+b.options.slidesToShow,b.options.fade===!0&&(e>0&&e--,f<=b.slideCount&&f++)),c=b.$slider.find(".slick-slide").slice(e,f),g(c),b.slideCount<=b.options.slidesToShow?(d=b.$slider.find(".slick-slide"),g(d)):b.currentSlide>=b.slideCount-b.options.slidesToShow?(d=b.$slider.find(".slick-cloned").slice(0,b.options.slidesToShow),g(d)):0===b.currentSlide&&(d=b.$slider.find(".slick-cloned").slice(-1*b.options.slidesToShow),g(d))},b.prototype.loadSlider=function(){var a=this;a.setPosition(),a.$slideTrack.css({opacity:1}),a.$slider.removeClass("slick-loading"),a.initUI(),"progressive"===a.options.lazyLoad&&a.progressiveLazyLoad()},b.prototype.next=b.prototype.slickNext=function(){var a=this;a.changeSlide({data:{message:"next"}})},b.prototype.orientationChange=function(){var a=this;a.checkResponsive(),a.setPosition()},b.prototype.pause=b.prototype.slickPause=function(){var a=this;a.autoPlayClear(),a.paused=!0},b.prototype.play=b.prototype.slickPlay=function(){var a=this;a.paused=!1,a.autoPlay()},b.prototype.postSlide=function(a){var b=this;b.$slider.trigger("afterChange",[b,a]),b.animating=!1,b.setPosition(),b.swipeLeft=null,b.options.autoplay===!0&&b.paused===!1&&b.autoPlay(),b.options.accessibility===!0&&b.initADA()},b.prototype.prev=b.prototype.slickPrev=function(){var a=this;a.changeSlide({data:{message:"previous"}})},b.prototype.preventDefault=function(a){a.preventDefault()},b.prototype.progressiveLazyLoad=function(){var c,d,b=this;c=a("img[data-lazy]",b.$slider).length,c>0&&(d=a("img[data-lazy]",b.$slider).first(),d.attr("src",d.attr("data-lazy")).removeClass("slick-loading").load(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad(),b.options.adaptiveHeight===!0&&b.setPosition()}).error(function(){d.removeAttr("data-lazy"),b.progressiveLazyLoad()}))},b.prototype.refresh=function(b){var c=this,d=c.currentSlide;c.destroy(!0),a.extend(c,c.initials,{currentSlide:d}),c.init(),b||c.changeSlide({data:{message:"index",index:d}},!1)},b.prototype.registerBreakpoints=function(){var c,d,e,b=this,f=b.options.responsive||null;if("array"===a.type(f)&&f.length){b.respondTo=b.options.respondTo||"window";for(c in f)if(e=b.breakpoints.length-1,d=f[c].breakpoint,f.hasOwnProperty(c)){for(;e>=0;)b.breakpoints[e]&&b.breakpoints[e]===d&&b.breakpoints.splice(e,1),e--;b.breakpoints.push(d),b.breakpointSettings[d]=f[c].settings}b.breakpoints.sort(function(a,c){return b.options.mobileFirst?a-c:c-a})}},b.prototype.reinit=function(){var b=this;b.$slides=b.$slideTrack.children(b.options.slide).addClass("slick-slide"),b.slideCount=b.$slides.length,b.currentSlide>=b.slideCount&&0!==b.currentSlide&&(b.currentSlide=b.currentSlide-b.options.slidesToScroll),b.slideCount<=b.options.slidesToShow&&(b.currentSlide=0),b.registerBreakpoints(),b.setProps(),b.setupInfinite(),b.buildArrows(),b.updateArrows(),b.initArrowEvents(),b.buildDots(),b.updateDots(),b.initDotEvents(),b.checkResponsive(!1,!0),b.options.focusOnSelect===!0&&a(b.$slideTrack).children().on("click.slick",b.selectHandler),b.setSlideClasses(0),b.setPosition(),b.$slider.trigger("reInit",[b]),b.options.autoplay===!0&&b.focusHandler()},b.prototype.resize=function(){var b=this;a(window).width()!==b.windowWidth&&(clearTimeout(b.windowDelay),b.windowDelay=window.setTimeout(function(){b.windowWidth=a(window).width(),b.checkResponsive(),b.unslicked||b.setPosition()},50))},b.prototype.removeSlide=b.prototype.slickRemove=function(a,b,c){var d=this;return"boolean"==typeof a?(b=a,a=b===!0?0:d.slideCount-1):a=b===!0?--a:a,d.slideCount<1||0>a||a>d.slideCount-1?!1:(d.unload(),c===!0?d.$slideTrack.children().remove():d.$slideTrack.children(this.options.slide).eq(a).remove(),d.$slides=d.$slideTrack.children(this.options.slide),d.$slideTrack.children(this.options.slide).detach(),d.$slideTrack.append(d.$slides),d.$slidesCache=d.$slides,d.reinit(),void 0)},b.prototype.setCSS=function(a){var d,e,b=this,c={};b.options.rtl===!0&&(a=-a),d="left"==b.positionProp?Math.ceil(a)+"px":"0px",e="top"==b.positionProp?Math.ceil(a)+"px":"0px",c[b.positionProp]=a,b.transformsEnabled===!1?b.$slideTrack.css(c):(c={},b.cssTransitions===!1?(c[b.animType]="translate("+d+", "+e+")",b.$slideTrack.css(c)):(c[b.animType]="translate3d("+d+", "+e+", 0px)",b.$slideTrack.css(c)))},b.prototype.setDimensions=function(){var a=this;a.options.vertical===!1?a.options.centerMode===!0&&a.$list.css({padding:"0px "+a.options.centerPadding}):(a.$list.height(a.$slides.first().outerHeight(!0)*a.options.slidesToShow),a.options.centerMode===!0&&a.$list.css({padding:a.options.centerPadding+" 0px"})),a.listWidth=a.$list.width(),a.listHeight=a.$list.height(),a.options.vertical===!1&&a.options.variableWidth===!1?(a.slideWidth=Math.ceil(a.listWidth/a.options.slidesToShow),a.$slideTrack.width(Math.ceil(a.slideWidth*a.$slideTrack.children(".slick-slide").length))):a.options.variableWidth===!0?a.$slideTrack.width(5e3*a.slideCount):(a.slideWidth=Math.ceil(a.listWidth),a.$slideTrack.height(Math.ceil(a.$slides.first().outerHeight(!0)*a.$slideTrack.children(".slick-slide").length)));var b=a.$slides.first().outerWidth(!0)-a.$slides.first().width();a.options.variableWidth===!1&&a.$slideTrack.children(".slick-slide").width(a.slideWidth-b)},b.prototype.setFade=function(){var c,b=this;b.$slides.each(function(d,e){c=-1*b.slideWidth*d,b.options.rtl===!0?a(e).css({position:"relative",right:c,top:0,zIndex:b.options.zIndex-2,opacity:0}):a(e).css({position:"relative",left:c,top:0,zIndex:b.options.zIndex-2,opacity:0})}),b.$slides.eq(b.currentSlide).css({zIndex:b.options.zIndex-1,opacity:1})},b.prototype.setHeight=function(){var a=this;if(1===a.options.slidesToShow&&a.options.adaptiveHeight===!0&&a.options.vertical===!1){var b=a.$slides.eq(a.currentSlide).outerHeight(!0);a.$list.css("height",b)}},b.prototype.setOption=b.prototype.slickSetOption=function(b,c,d){var f,g,e=this;if("responsive"===b&&"array"===a.type(c))for(g in c)if("array"!==a.type(e.options.responsive))e.options.responsive=[c[g]];else{for(f=e.options.responsive.length-1;f>=0;)e.options.responsive[f].breakpoint===c[g].breakpoint&&e.options.responsive.splice(f,1),f--;e.options.responsive.push(c[g])}else e.options[b]=c;d===!0&&(e.unload(),e.reinit())},b.prototype.setPosition=function(){var a=this;a.setDimensions(),a.setHeight(),a.options.fade===!1?a.setCSS(a.getLeft(a.currentSlide)):a.setFade(),a.$slider.trigger("setPosition",[a])},b.prototype.setProps=function(){var a=this,b=document.body.style;a.positionProp=a.options.vertical===!0?"top":"left","top"===a.positionProp?a.$slider.addClass("slick-vertical"):a.$slider.removeClass("slick-vertical"),(void 0!==b.WebkitTransition||void 0!==b.MozTransition||void 0!==b.msTransition)&&a.options.useCSS===!0&&(a.cssTransitions=!0),a.options.fade&&("number"==typeof a.options.zIndex?a.options.zIndex<3&&(a.options.zIndex=3):a.options.zIndex=a.defaults.zIndex),void 0!==b.OTransform&&(a.animType="OTransform",a.transformType="-o-transform",a.transitionType="OTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.MozTransform&&(a.animType="MozTransform",a.transformType="-moz-transform",a.transitionType="MozTransition",void 0===b.perspectiveProperty&&void 0===b.MozPerspective&&(a.animType=!1)),void 0!==b.webkitTransform&&(a.animType="webkitTransform",a.transformType="-webkit-transform",a.transitionType="webkitTransition",void 0===b.perspectiveProperty&&void 0===b.webkitPerspective&&(a.animType=!1)),void 0!==b.msTransform&&(a.animType="msTransform",a.transformType="-ms-transform",a.transitionType="msTransition",void 0===b.msTransform&&(a.animType=!1)),void 0!==b.transform&&a.animType!==!1&&(a.animType="transform",a.transformType="transform",a.transitionType="transition"),a.transformsEnabled=null!==a.animType&&a.animType!==!1},b.prototype.setSlideClasses=function(a){var c,d,e,f,b=this;d=b.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),b.$slides.eq(a).addClass("slick-current"),b.options.centerMode===!0?(c=Math.floor(b.options.slidesToShow/2),b.options.infinite===!0&&(a>=c&&a<=b.slideCount-1-c?b.$slides.slice(a-c,a+c+1).addClass("slick-active").attr("aria-hidden","false"):(e=b.options.slidesToShow+a,d.slice(e-c+1,e+c+2).addClass("slick-active").attr("aria-hidden","false")),0===a?d.eq(d.length-1-b.options.slidesToShow).addClass("slick-center"):a===b.slideCount-1&&d.eq(b.options.slidesToShow).addClass("slick-center")),b.$slides.eq(a).addClass("slick-center")):a>=0&&a<=b.slideCount-b.options.slidesToShow?b.$slides.slice(a,a+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):d.length<=b.options.slidesToShow?d.addClass("slick-active").attr("aria-hidden","false"):(f=b.slideCount%b.options.slidesToShow,e=b.options.infinite===!0?b.options.slidesToShow+a:a,b.options.slidesToShow==b.options.slidesToScroll&&b.slideCount-a<b.options.slidesToShow?d.slice(e-(b.options.slidesToShow-f),e+f).addClass("slick-active").attr("aria-hidden","false"):d.slice(e,e+b.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false")),"ondemand"===b.options.lazyLoad&&b.lazyLoad()},b.prototype.setupInfinite=function(){var c,d,e,b=this;if(b.options.fade===!0&&(b.options.centerMode=!1),b.options.infinite===!0&&b.options.fade===!1&&(d=null,b.slideCount>b.options.slidesToShow)){for(e=b.options.centerMode===!0?b.options.slidesToShow+1:b.options.slidesToShow,c=b.slideCount;c>b.slideCount-e;c-=1)d=c-1,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d-b.slideCount).prependTo(b.$slideTrack).addClass("slick-cloned");for(c=0;e>c;c+=1)d=c,a(b.$slides[d]).clone(!0).attr("id","").attr("data-slick-index",d+b.slideCount).appendTo(b.$slideTrack).addClass("slick-cloned");b.$slideTrack.find(".slick-cloned").find("[id]").each(function(){a(this).attr("id","")})}},b.prototype.setPaused=function(a){var b=this;b.options.autoplay===!0&&b.options.pauseOnHover===!0&&(b.paused=a,a?b.autoPlayClear():b.autoPlay())},b.prototype.selectHandler=function(b){var c=this,d=a(b.target).is(".slick-slide")?a(b.target):a(b.target).parents(".slick-slide"),e=parseInt(d.attr("data-slick-index"));return e||(e=0),c.slideCount<=c.options.slidesToShow?(c.setSlideClasses(e),c.asNavFor(e),void 0):(c.slideHandler(e),void 0)},b.prototype.slideHandler=function(a,b,c){var d,e,f,g,h=null,i=this;return b=b||!1,i.animating===!0&&i.options.waitForAnimate===!0||i.options.fade===!0&&i.currentSlide===a||i.slideCount<=i.options.slidesToShow?void 0:(b===!1&&i.asNavFor(a),d=a,h=i.getLeft(d),g=i.getLeft(i.currentSlide),i.currentLeft=null===i.swipeLeft?g:i.swipeLeft,i.options.infinite===!1&&i.options.centerMode===!1&&(0>a||a>i.getDotCount()*i.options.slidesToScroll)?(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)),void 0):i.options.infinite===!1&&i.options.centerMode===!0&&(0>a||a>i.slideCount-i.options.slidesToScroll)?(i.options.fade===!1&&(d=i.currentSlide,c!==!0?i.animateSlide(g,function(){i.postSlide(d)}):i.postSlide(d)),void 0):(i.options.autoplay===!0&&clearInterval(i.autoPlayTimer),e=0>d?0!==i.slideCount%i.options.slidesToScroll?i.slideCount-i.slideCount%i.options.slidesToScroll:i.slideCount+d:d>=i.slideCount?0!==i.slideCount%i.options.slidesToScroll?0:d-i.slideCount:d,i.animating=!0,i.$slider.trigger("beforeChange",[i,i.currentSlide,e]),f=i.currentSlide,i.currentSlide=e,i.setSlideClasses(i.currentSlide),i.updateDots(),i.updateArrows(),i.options.fade===!0?(c!==!0?(i.fadeSlideOut(f),i.fadeSlide(e,function(){i.postSlide(e)})):i.postSlide(e),i.animateHeight(),void 0):(c!==!0?i.animateSlide(h,function(){i.postSlide(e)}):i.postSlide(e),void 0)))},b.prototype.startLoad=function(){var a=this;a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&(a.$prevArrow.hide(),a.$nextArrow.hide()),a.options.dots===!0&&a.slideCount>a.options.slidesToShow&&a.$dots.hide(),a.$slider.addClass("slick-loading")},b.prototype.swipeDirection=function(){var a,b,c,d,e=this;return a=e.touchObject.startX-e.touchObject.curX,b=e.touchObject.startY-e.touchObject.curY,c=Math.atan2(b,a),d=Math.round(180*c/Math.PI),0>d&&(d=360-Math.abs(d)),45>=d&&d>=0?e.options.rtl===!1?"left":"right":360>=d&&d>=315?e.options.rtl===!1?"left":"right":d>=135&&225>=d?e.options.rtl===!1?"right":"left":e.options.verticalSwiping===!0?d>=35&&135>=d?"left":"right":"vertical"},b.prototype.swipeEnd=function(){var c,b=this;if(b.dragging=!1,b.shouldClick=b.touchObject.swipeLength>10?!1:!0,void 0===b.touchObject.curX)return!1;if(b.touchObject.edgeHit===!0&&b.$slider.trigger("edge",[b,b.swipeDirection()]),b.touchObject.swipeLength>=b.touchObject.minSwipe)switch(b.swipeDirection()){case"left":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide+b.getSlideCount()):b.currentSlide+b.getSlideCount(),b.slideHandler(c),b.currentDirection=0,b.touchObject={},b.$slider.trigger("swipe",[b,"left"]);break;case"right":c=b.options.swipeToSlide?b.checkNavigable(b.currentSlide-b.getSlideCount()):b.currentSlide-b.getSlideCount(),b.slideHandler(c),b.currentDirection=1,b.touchObject={},b.$slider.trigger("swipe",[b,"right"])}else b.touchObject.startX!==b.touchObject.curX&&(b.slideHandler(b.currentSlide),b.touchObject={})},b.prototype.swipeHandler=function(a){var b=this;if(!(b.options.swipe===!1||"ontouchend"in document&&b.options.swipe===!1||b.options.draggable===!1&&-1!==a.type.indexOf("mouse")))switch(b.touchObject.fingerCount=a.originalEvent&&void 0!==a.originalEvent.touches?a.originalEvent.touches.length:1,b.touchObject.minSwipe=b.listWidth/b.options.touchThreshold,b.options.verticalSwiping===!0&&(b.touchObject.minSwipe=b.listHeight/b.options.touchThreshold),a.data.action){case"start":b.swipeStart(a);break;case"move":b.swipeMove(a);break;case"end":b.swipeEnd(a)}},b.prototype.swipeMove=function(a){var d,e,f,g,h,b=this;return h=void 0!==a.originalEvent?a.originalEvent.touches:null,!b.dragging||h&&1!==h.length?!1:(d=b.getLeft(b.currentSlide),b.touchObject.curX=void 0!==h?h[0].pageX:a.clientX,b.touchObject.curY=void 0!==h?h[0].pageY:a.clientY,b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curX-b.touchObject.startX,2))),b.options.verticalSwiping===!0&&(b.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(b.touchObject.curY-b.touchObject.startY,2)))),e=b.swipeDirection(),"vertical"!==e?(void 0!==a.originalEvent&&b.touchObject.swipeLength>4&&a.preventDefault(),g=(b.options.rtl===!1?1:-1)*(b.touchObject.curX>b.touchObject.startX?1:-1),b.options.verticalSwiping===!0&&(g=b.touchObject.curY>b.touchObject.startY?1:-1),f=b.touchObject.swipeLength,b.touchObject.edgeHit=!1,b.options.infinite===!1&&(0===b.currentSlide&&"right"===e||b.currentSlide>=b.getDotCount()&&"left"===e)&&(f=b.touchObject.swipeLength*b.options.edgeFriction,b.touchObject.edgeHit=!0),b.swipeLeft=b.options.vertical===!1?d+f*g:d+f*(b.$list.height()/b.listWidth)*g,b.options.verticalSwiping===!0&&(b.swipeLeft=d+f*g),b.options.fade===!0||b.options.touchMove===!1?!1:b.animating===!0?(b.swipeLeft=null,!1):(b.setCSS(b.swipeLeft),void 0)):void 0)},b.prototype.swipeStart=function(a){var c,b=this;return 1!==b.touchObject.fingerCount||b.slideCount<=b.options.slidesToShow?(b.touchObject={},!1):(void 0!==a.originalEvent&&void 0!==a.originalEvent.touches&&(c=a.originalEvent.touches[0]),b.touchObject.startX=b.touchObject.curX=void 0!==c?c.pageX:a.clientX,b.touchObject.startY=b.touchObject.curY=void 0!==c?c.pageY:a.clientY,b.dragging=!0,void 0)},b.prototype.unfilterSlides=b.prototype.slickUnfilter=function(){var a=this;null!==a.$slidesCache&&(a.unload(),a.$slideTrack.children(this.options.slide).detach(),a.$slidesCache.appendTo(a.$slideTrack),a.reinit())},b.prototype.unload=function(){var b=this;a(".slick-cloned",b.$slider).remove(),b.$dots&&b.$dots.remove(),b.$prevArrow&&b.htmlExpr.test(b.options.prevArrow)&&b.$prevArrow.remove(),b.$nextArrow&&b.htmlExpr.test(b.options.nextArrow)&&b.$nextArrow.remove(),b.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},b.prototype.unslick=function(a){var b=this;b.$slider.trigger("unslick",[b,a]),b.destroy()},b.prototype.updateArrows=function(){var b,a=this;b=Math.floor(a.options.slidesToShow/2),a.options.arrows===!0&&a.slideCount>a.options.slidesToShow&&!a.options.infinite&&(a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===a.currentSlide?(a.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-a.options.slidesToShow&&a.options.centerMode===!1?(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):a.currentSlide>=a.slideCount-1&&a.options.centerMode===!0&&(a.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),a.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},b.prototype.updateDots=function(){var a=this;null!==a.$dots&&(a.$dots.find("li").removeClass("slick-active").attr("aria-hidden","true"),a.$dots.find("li").eq(Math.floor(a.currentSlide/a.options.slidesToScroll)).addClass("slick-active").attr("aria-hidden","false"))},b.prototype.visibility=function(){var a=this;document[a.hidden]?(a.paused=!0,a.autoPlayClear()):a.options.autoplay===!0&&(a.paused=!1,a.autoPlay())},b.prototype.initADA=function(){var b=this;b.$slides.add(b.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),b.$slideTrack.attr("role","listbox"),b.$slides.not(b.$slideTrack.find(".slick-cloned")).each(function(c){a(this).attr({role:"option","aria-describedby":"slick-slide"+b.instanceUid+c})}),null!==b.$dots&&b.$dots.attr("role","tablist").find("li").each(function(c){a(this).attr({role:"presentation","aria-selected":"false","aria-controls":"navigation"+b.instanceUid+c,id:"slick-slide"+b.instanceUid+c})}).first().attr("aria-selected","true").end().find("button").attr("role","button").end().closest("div").attr("role","toolbar"),b.activateADA()},b.prototype.activateADA=function(){var a=this,b=a.$slider.find("*").is(":focus");a.$slideTrack.find(".slick-active").attr({"aria-hidden":"false",tabindex:"0"}).find("a, input, button, select").attr({tabindex:"0"}),b&&a.$slideTrack.find(".slick-active").focus()},b.prototype.focusHandler=function(){var b=this;b.$slider.on("focus.slick blur.slick","*",function(c){c.stopImmediatePropagation();var d=a(this);setTimeout(function(){b.isPlay&&(d.is(":focus")?(b.autoPlayClear(),b.paused=!0):(b.paused=!1,b.autoPlay()))},0)})},a.fn.slick=function(){var g,a=this,c=arguments[0],d=Array.prototype.slice.call(arguments,1),e=a.length,f=0;for(f;e>f;f++)if("object"==typeof c||"undefined"==typeof c?a[f].slick=new b(a[f],c):g=a[f].slick[c].apply(a[f].slick,d),"undefined"!=typeof g)return g;return a}});/* Start - GFO-4860 */$(document).ready(function() {	if ($('#basket-primary').length) {		if ($('#ndoURLContainer').length) {			var sURL = $('#ndoURLContainer').data('url') + "&_=" + $.now();				$('#ndoURLContainer').data('url', sURL);		}	}});/* End - GFO-4860 *//* Start - Emagination Single Variant multi-buy */$(document).ready(function() {	require(['modules/product-description/common', 'modules/common'], function(pdp, common) {			if (common.isPage('PDP')) {				var personaliseHandler,				self,				bindHotFixWindowHandler;						pdp.initPersonaliseHandler = function initPersonaliseHandler() {				  var $skuIdVal = $('#skuIdVal'),						sSkuIdValue;									if ($skuIdVal.length > 0) {					sSkuIdValue = $skuIdVal.val();					require(['modules/personalise-product/common'], function (PersonaliseProduct) {						bindHotFixWindowHandler = function bindHotFixWindowHandler() {							self = personaliseHandler;								$(window).off('personaliseProduct:reset').on('personaliseProduct:reset', function (e) {								self.setProductPings('#product-carousel');								self.destroyPersonalisedProductImage();								self.setDefaultPDPImageVisible();								self.setDisplayPersonalisedImageWindowProperty(false);								self.resetPersonaliseButtons();								self.resetAddToBasketForm();								self.clearEmaginationCookies();								self.bIsPersonalisedProductReadyToSave = false;								self.bHasSKUBeenPersonalised = false;								self.masterGUID = null;								self.clonedGUID = null;								self.bResetTriggered = true;								try {									if (e.beenAddedToBasket) {										self.bResetTriggered = false;									}									if (e.resetVariantProperty) {										self.bVariantHasBeenSelected = false;										self.bResetTriggered = true;									}								} catch (ignore) {}							});											};												personaliseHandler = new PersonaliseProduct({							sPDPSelector: '.product-description',							sPersonaliseSelector: '#personalise-button',							sAddToBasketSelector: '.addPersonalisedToBasketForm',							sPersonaliseErrorSelector: '.personalise-error',							sProductName: sSkuIdValue //'276-2966'						});						personaliseHandler.clearEmaginationCookies();						if (window.AsyncBlockController.isCachedPage() && !window.AsyncBlockController.hasCompleted()) {							$(window).on('AsyncBlockControllerComplete', function () {								personaliseHandler.init();								$(window).off('personaliseProduct:reset');								bindHotFixWindowHandler();							});						} else {							personaliseHandler.init();							$(window).off('personaliseProduct:reset');							bindHotFixWindowHandler();						}												personaliseHandler.handleAddedToBasket = function handleAddedToBasket() {							var $quantity = $(this.sQuantitySelector),								$addedToButton = $(this.sAddedToButtonSelector),								eResetProduct = $.Event('personaliseProduct:reset');							this.deleteCurrentPersonalisation({keepCookie: false});							this.restrictAddIfLimitOfOne($quantity, $addedToButton);							this.unbindEventsForPersonalisedProductImage();							if (this.bVariantHasBeenSelected) {								eResetProduct.resetVariantProperty = true;							}							eResetProduct.beenAddedToBasket = true;							this.$window.trigger(eResetProduct);						};						});				}			};		}	});	});/* End - Emagination Single Variant multi-buy */$(document).ready(function() {  if ($('body').hasClass('has-slick')) {    $('.carousel-slider--one-across').slick({        infinite: true,        slidesToShow: 1,        slidesToScroll: 1,        autoplay: false,        arrows: true,        dots: true    });    $('.carousel-slider--three-across').slick({        infinite: true,        slidesToShow: 3,        slidesToScroll: 3,        autoplay: false,        arrows: true,        dots: true,        responsive: [        {          breakpoint: 767,          settings: {            slidesToShow: 2,            slidesToScroll: 2,          }        },        {          breakpoint: 599,          settings: {            slidesToShow: 1,            slidesToScroll: 1          }        }        ]      });      $('.carousel-slider--four-across').slick({        infinite: true,        slidesToShow: 4,        slidesToScroll: 4,        autoplay: false,        arrows: true,        dots: true,        responsive: [        {          breakpoint: 959,          settings: {            slidesToShow: 3,            slidesToScroll: 3,          }        },        {          breakpoint: 767,          settings: {            slidesToShow: 2,            slidesToScroll: 2,          }        },        {          breakpoint: 599,          settings: {            slidesToShow: 1,            slidesToScroll: 1          }        }        ]      });      $('.carousel-slider--five-across').slick({        infinite: true,        slidesToShow: 5,        slidesToScroll: 5,        autoplay: false,        arrows: true,        dots: true,        responsive: [        {          breakpoint: 959,          settings: {            slidesToShow: 3,            slidesToScroll: 3,          }        },        {          breakpoint: 767,          settings: {            slidesToShow: 2,            slidesToScroll: 2,          }        },        {          breakpoint: 599,          settings: {            slidesToShow: 1,            slidesToScroll: 1          }        }        ]      });  }});/* Start - Defect GFO-5985 */if (window.TescoData === 'undefined' || window.TescoData === undefined ) {    window.TescoData = {};}if (window.TescoData.pdp === 'undefined' || window.TescoData.pdp === undefined) {    window.TescoData.pdp = {};}/* End - Defect GFO-5985 *//*Start- Kiosk tabs display */require(['modules/product-description/common', 'modules/common', 'modules/tesco.analytics', 'modules/breakpoint', 'modules/product-variants/ProductVariantController', 'modules/jargon-buster/common', 'modules/chip-and-pin/kmf-io'], function(pdp, common, analytics, breakpoint, ProductVariantController, jargonBuster, kmfIO){	pdp.init = function(){				var $productIsPersonalisable,                    oProductVariantController;                if (!common.isPage('PDP')) {                    return;                }                if ($('.vContainer').length) {                    oProductVariantController = new ProductVariantController();                }                pdp.changeColumnLayout();                $productIsPersonalisable = $("#productIsPersonalisable");                if ($productIsPersonalisable.length > 0 && $productIsPersonalisable.val() === "true") {                    pdp.initPersonaliseHandler();                }                //pdp.swatchesAndSizes.init();                pdp.loadBazaarVoice();                pdp.trackRichRelevanceProducts();                jargonBuster.init();                try {                    HtmlParser.parseSelectors('.description-section-content');                } catch (e) {                    console.info('HtmlParser:', e.message);                }                pdp.initShowMore();                if (!window.isKiosk()) {                    pdp.initInlineSpecialOffers();                }                if (kmfIO.checkKMFExists()) {                    setTimeout(function () {                        pdp.getBasketTotalCount();                    }, 700);                }                $('.addTheRangeButton').on(pdp.clickEvent, pdp.scrollingTo);                $('.getTheLookButton').on(pdp.clickEvent, pdp.scrollingTo);                $('.linkSaveButton').on(pdp.clickEvent, pdp.scrollingTo);                $('.bundleButton').on(pdp.clickEvent, pdp.scrollingTo);                $('.print-this-page a').on(pdp.clickEvent, pdp.print);                $('.product-specifications-link').on(pdp.clickEvent, pdp.bindVirtualPages);                if (common.isGalaxyTabNativeBrowser()) {                    pdp.priceCheckTableFix();                }                if (!window.isKiosk()) {                    pdp.formatCustomisedBlocks();                }				setTimeout(function () {                    pdp.initAddTheRangeBlock();					pdp.initCompleteTheLookBlock();					pdp.initLinkSaveBlock();					pdp.initBundleBlock();                },500);                if ($('.product-promo-container').length) {                    pdp.setSellerUrl();                }                if (window.location.href.indexOf("expand=true") > -1) {                    var pos = $('#product-promotions').offset().top;                    if (breakpoint.mobile || breakpoint.vTablet || breakpoint.hTablet) {                        pos = pos - 125;                    } else {                        pos = pos - 100;                    }                    $('html, body').animate({                        scrollTop: pos                    }, 'fast');                }                if (window.isKiosk() && pdp.isTabViewEnabled()) {                    pdp.initTabViewDOMElements();                }                if (breakpoint.desktop || breakpoint.largeDesktop) {                    pdp.displayInlineContent();                }	}});/*End- Kiosk tabs display *//* Start - Fix for GFO-6322 */$(document).ready(function () {    require(['modules/checkout/payment'], function (payment) {        $(document).on('tap click', '#whatsThisCharge', payment.whatsThisChargePopup);        $(document).on('tap click', '#whatsThisChargeMessage .close', payment.whatsThisChargeClose);    });});/* End - Fix for GFO-6322 */